{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/07/20/","result":{"data":{"site":{"siteMetadata":{"title":"SetValue.NET","author":"Raúl Fernández de Córdoba","siteUrl":"http://setvalue.net","description":"Noticias, actualizaciones y mis experiencias sobre el mundo de las soluciones cloud","social":{"twitter":"rfcm83","facebook":"","linkedin":"rfcm83","github":"rfcm83","email":"rfcm83@gmail.com","rss":"https://feeds.feedburner.com/setvalue.net"}}},"markdownRemark":{"id":"30a01f07-b94a-5768-9b30-2ab471095700","excerpt":"Una vez finaliza el desarrollo de un sitio web, para publicarlo y utilizar un custom domain, el sitio necesita un certificado digital que permita acceder a él…","html":"<p>Una vez finaliza el desarrollo de un sitio web, para publicarlo y utilizar un <em>custom domain</em>, el sitio necesita un certificado digital que permita acceder a él por el protocolo seguro HTTPS y evite que el usuario reciba el típico mensaje de que su conexión podría ser insegura, y que pueda provocar que desista de entrar al sitio.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 314px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f7988e24a403696ecfbfd4cc50e7058e/5b158/Connection-Non-Secured.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.34567901234568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC2UlEQVQ4y41U2WKiQBDk07IaFRDwQgVRURAYLo9Es8k+7AfsT9d2j6K4m+uhbGacrr5qRtF1He1O54pWu32FXNf+q6NTO9tRVZimieFwCMWij59Ziny9QhkEeElTnFKBtzxDGQbYhee9fbzBUQjsNyGeRYxk5eMpiXBMYrijEVRNOxMaXQNzx4Fjj+COx5hNJmdLcAgurdnOppd9slM6OyGSBfl50zHs0RBcqUqZKgZlmOcl4iiAECk2UQSRJohjgWJbQuQ5Ysos3xXIsgzb7RZryjKmc6nIkIgI5X6HIAihaRfCRPDBgg7ERJpAEJlIBEJy8lwPmyBCQmWH1JKUyH0qdxOskSQbChzLc1km0O/3qYeWJSPFlMk23yIjR9PoUjRNlvERut3u3VrTdOmj6LqGbu2QxCdE7Hi27wdU6pG4qSyHyrIT27tgX0AxDJryfI7BYCBtGIZYLBbU5AAOTdH3ffkfB6ky+wwywzHJgXvJBEzmui48z5P7HKTX610Jv4LCP+zAmTKqUqseVS34DpkkZJL1ei2zKcuSpJCgKArSZi7XvP/dci9TPmfx+PiIRqOBNt1N/mY0m01pebLfHgr3jgfBSufsZt5MDmJFCOlGRCTaAQn2K13eySZNMxyPJ7y+vuLt1xt22x2e9gccT884nV7gTMZX+dxErNZK1WtTph4KfjGcCR4efqDVaslSGY1GU7ahIlM7bVj2DLZfYLRIMJyFhAADL8JoHqFrWrcp1yf9L+76xHvkaFh9+jZvoL2rbHS+LZfUP7tWt5I1GOTDjwE/rJZlSh3LoZi9AfLff2BPXNnLw+FAr03y332+9qsilK3K4E6nkmxC7yaTK/ynqp4Ps94Y/M3y6cinvn2nw8pyNufsLGkZMkPuyZSjUA9ZxLY9lk+54zoY2zZFduSapyqzrZG+K2yOsFwsYZKN6LHkt9H3V1KTCa/TEsvlgrLs3JX/UX//AtFKXUT0+OJtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Conexión no segura\"\n        title=\"Conexión no segura\"\n        src=\"/static/f7988e24a403696ecfbfd4cc50e7058e/5b158/Connection-Non-Secured.png\"\n        srcset=\"/static/f7988e24a403696ecfbfd4cc50e7058e/8aea6/Connection-Non-Secured.png 243w,\n/static/f7988e24a403696ecfbfd4cc50e7058e/5b158/Connection-Non-Secured.png 314w\"\n        sizes=\"(max-width: 314px) 100vw, 314px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Además de evitar este mensaje, proveedores de identidades OAuth2 utilizados por los servicios de autenticación como los de Microsoft Identity Platform, requieren que el sitio web utilice el protocolo HTTPS.</p>\n<p>Para lograr tener una conexión segura, y poder introducir un proveedor de identidades OAuth2, es necesario agregar un certificado digital al sitio web, que, aunque los hay de distintos tipos, no suelen ser económicos sobre todo si se precisa un certificado wildcard (*.example.com).</p>\n<p>Otro de los problemas que nos encontramos, es cuando ese certificado expira, y por un descuido o por una falta de planificación no se ha generado uno nuevo, este escenario, a pesar de haber tenido un certificado válido, la conexión al sitio pasa a ser insegura mostrando el navegador un mensaje que plantea a los usuarios la recomendación de no continuar.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a751dad362c5b281ba82b5669826386d/29114/ExpiredCertificate.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAz0lEQVQoz6WQYQqDMAyFe5Ix0K1NWrWVCnYWhFIdY9fY/c+wWLc/6jZh349SEl7y8phzrm1brTUiCiGyRJ79gHNelSUjAQBIKZVS9GJCyBf4gbnL4M00RQiOWHN+PxxzfiZowzx9gUiwZRVAoQzOdX6irutkADZh65nkqfX+4jvbWMrCGIOlpuoOMQCdZK2lCOhDMaAq8tvj3PTIT9T8JqZLyGaIQ4hxGMfxOsYh9mGQqoDV8WzrFoTKYGUgWaX9KQqxy/ZsALZC3ifex1/iJ+H3beBlMjYyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Certificado Expirado\"\n        title=\"Certificado Expirado\"\n        src=\"/static/a751dad362c5b281ba82b5669826386d/587b0/ExpiredCertificate.png\"\n        srcset=\"/static/a751dad362c5b281ba82b5669826386d/8aea6/ExpiredCertificate.png 243w,\n/static/a751dad362c5b281ba82b5669826386d/44c61/ExpiredCertificate.png 485w,\n/static/a751dad362c5b281ba82b5669826386d/587b0/ExpiredCertificate.png 970w,\n/static/a751dad362c5b281ba82b5669826386d/5b795/ExpiredCertificate.png 1455w,\n/static/a751dad362c5b281ba82b5669826386d/29114/ExpiredCertificate.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Para estos escenarios, nace una Autoridad Certificadora (CA) sin ánimo de lucro, llamada <a href=\"https://letsencrypt.org/\" target=\"_blank\">Let's Encrypt</a>, que una vez confirmada la propiedad de un sitio, mediante un proceso definido en su documentación, permite crear certificados digitales para securizar un website. Pero no todo va a ser fácil y bonito, estos certificados expiran en plazos de 90 días por lo que hay que preocuparse de estar renovándolos de forma continua.</p>\n<p>Aunque existen diversas web's que te ayudan en este proceso, sigue siendo una operación muy manual en la que, mediante las claves privadas, debes generar el propio certificado y a pesar de que te advierten cuando queda poco tiempo para que expire el certificado, es un lío estar pendiente de renovarlos continuamente. Let's Encrypt tiene soluciones como <a href=\"https://certbot.eff.org/\" target=\"_blank\">CertBot</a> para facilitar estas tareas de creación y renovado automático, pero que hoy por hoy, no son compatibles con una Azure Web App o una Function App.</p>\n<p>En este artículo vamos a realizar la creación / renovación de certificados de forma automática mediante la asociación del certificado en un Key Vault.</p>\n<h2>Let's go</h2>\n<p>El primer requisito necesario para poder automatizar la generación y asignación de certificados digitales a los sitios web, es definir una zona DNS.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aea9e7f0cd34938d7804b3a2985c2796/29114/DemoSSL-00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4UlEQVQoz6WSTU+DQBCG+eFIWo1HqVTjVQq1JN56sKmJdw0mnvwFXryxwrI7O/uFK9i09iKBJ28ye3nzZCbrTebL85vMny2C2eIkjM+uV+nD83Lj8pI9vnZZbfP7p7fwdu1fxKdXd5MoDS6TaZR4RqFCaAbhFaQkhBQFIWX1VdKqomVFOYC1zVGMtW32D49SiohSSlozlEru6GUWABJRacMEGq1Ni9baOte/ZQD4MSPyukYhtFJdepntL40TumF29Co3IxhXdmexg8v5B3v/ZFIA55yhou7LKL1f/S/utOKAb5CAdqyn7ePPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DNS Zone\"\n        title=\"DNS Zone\"\n        src=\"/static/aea9e7f0cd34938d7804b3a2985c2796/587b0/DemoSSL-00.png\"\n        srcset=\"/static/aea9e7f0cd34938d7804b3a2985c2796/8aea6/DemoSSL-00.png 243w,\n/static/aea9e7f0cd34938d7804b3a2985c2796/44c61/DemoSSL-00.png 485w,\n/static/aea9e7f0cd34938d7804b3a2985c2796/587b0/DemoSSL-00.png 970w,\n/static/aea9e7f0cd34938d7804b3a2985c2796/5b795/DemoSSL-00.png 1455w,\n/static/aea9e7f0cd34938d7804b3a2985c2796/29114/DemoSSL-00.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>En una <em>Web App</em> o una <em>Function App</em> encontramos que su url es la combinación del nombre que hemos introducido a la app y *.azurewebsites.net. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d26a52aba8b5946aee4cb58ee46fdd7/29114/DemoSSL-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABeklEQVQoz3VSyU7kQAzNj8MA4jZSC4S4cAEamkWcOCAWzX2AGc1/sKaTsl0u15J5STdNc+DJSmrx8/NS1drO5Ofe+Y+tMWx1dLi5e3p89XtyfX9y83B+9/fs9g/s9Obx4te/0f7lyuhgY2eytn0E5/XtcVUTR6XuE6WU3JWcc+pyxLb7HtVL3Qhz6+ipllenUwqtWMOGRcPBScQXVnN6kdJqp9aJdRwKa64cU4yRmYlIQnTic0qQX4SP0bxnEv/WOBHvvah6nKeUKiIHsog49hqzC9il3lLuUYrCC//B0gcQHD5V7WhOJm5FWTx4jsKUWAGzd/ZT3DGDs1xwr4x8kYoGRXp9swYg3KCK5AvkzGy2neGT3DKDhlUIlj9gAxnuSD4NZERhy2rpi3LNHFTzvJ55VVAOMYPpQl+/BGs1PTt7l7g80orQSMEtRoLkbSblPAYGGUghSnyeUiPmNJLGRdo9Ged5kCL2eB6zqjAY9ALthQ+UEXSht6z8HybBcKHcvyhYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Web App\"\n        title=\"Web App\"\n        src=\"/static/2d26a52aba8b5946aee4cb58ee46fdd7/587b0/DemoSSL-01.png\"\n        srcset=\"/static/2d26a52aba8b5946aee4cb58ee46fdd7/8aea6/DemoSSL-01.png 243w,\n/static/2d26a52aba8b5946aee4cb58ee46fdd7/44c61/DemoSSL-01.png 485w,\n/static/2d26a52aba8b5946aee4cb58ee46fdd7/587b0/DemoSSL-01.png 970w,\n/static/2d26a52aba8b5946aee4cb58ee46fdd7/5b795/DemoSSL-01.png 1455w,\n/static/2d26a52aba8b5946aee4cb58ee46fdd7/29114/DemoSSL-01.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Este subdominio está certificado por Azure pero tiene un pequeño inconveniente, y es que la url es muy larga de escribir, y sobre todo que no llevan nuestra marca. En el blade de <em>Custom domains</em>, podemos ver las DNS asociadas a nuestro sitio web, agregar nuevas e incluso comprar algún dominio.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/63c2387783b5448d042a0b6ecf576f10/29114/DemoSSL-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQoz5WQMU/DMBCF/cOhQNkYWlHKwERDQ0FsDBSBxAoIJHa2bIGgECc+24nPdrAcBFFSBHw6Wbqz3909k41puHNwOtwLBuNgfTzb3l/ML27D5V14eX9y/djE4urh7OZpNDtfGx0Op8ebk/lgN9iaHJFMSpTcGmUs1v+EUBBaa5AiKV4BeIVorDW2tnUvbDdIAaCUYoxFURTHcZqm7w6awx8gwBmiFpwnLzGl1JWYR7SQUopVkIyBRmRcREmOCh2r3NnVngWHqqxkWSZ+f/Dnt8jjOhpjbA9CGVOlLBGfKWSUug3dU+Wp8FPx1aUrfnM+WaGqyvlsJmhPozctXOrq7Yr7MN5M+8Ft3bbQ9ZzzounXv/uVD8W7cOIitR6PAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Custom domains\"\n        title=\"Custom domains\"\n        src=\"/static/63c2387783b5448d042a0b6ecf576f10/587b0/DemoSSL-02.png\"\n        srcset=\"/static/63c2387783b5448d042a0b6ecf576f10/8aea6/DemoSSL-02.png 243w,\n/static/63c2387783b5448d042a0b6ecf576f10/44c61/DemoSSL-02.png 485w,\n/static/63c2387783b5448d042a0b6ecf576f10/587b0/DemoSSL-02.png 970w,\n/static/63c2387783b5448d042a0b6ecf576f10/5b795/DemoSSL-02.png 1455w,\n/static/63c2387783b5448d042a0b6ecf576f10/29114/DemoSSL-02.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><strong>Nota</strong>: Para poder utilizar Custom Domains y SSL en una web app, ésta debe estar utilizando un <em>Service Plan</em> superior o igual a B1.</p>\n</blockquote>\n<p>Dado que vamos a trabajar en disponer de un certificado SSL y que este se autorenueve de forma periódica, es recomendable limitar el acceso a nuestro sitio a únicamente tráfico HTTPS.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2444db75dc3326cf63bcdead3888edb3/29114/DemoSSL-03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABJklEQVQoz42RzUsDMRDF83dLW0FvIl1BPXiQbXGp4s2DSgWvKgreRQ9WkLWU7WY3k8/ZpKabotUW2h+PQBLezLyEbB4kO0dnW/vdVtRtRp3tw97J5V1ydZ9cP5zePAX1+o/nt8/tzkWz3WnsxRu7x40obkUxyaVEyZ011uFkDdAoKMa8zJVghIKoqgqkGJZDAK4RrXPWTdxkQW6mqrJBpAQwxjDGPgbvaZpmWTb20ALWgABnvkjB+OvgkxVTD6sRc0gpxTJIzsAiliDevigiGlya3C3NTwQHrbRUalTPD/X6a6rxRa21bgFCGTNKKsQXCjmlfsJp/xqNM8dPlf/mEaXASqO1zxk6VDXBb+fwW38+f+IfjIduiCv+OYzwJ3PBy1Bv8W4l3/a1cAgJM9r0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"HTTPS Only\"\n        title=\"HTTPS Only\"\n        src=\"/static/2444db75dc3326cf63bcdead3888edb3/587b0/DemoSSL-03.png\"\n        srcset=\"/static/2444db75dc3326cf63bcdead3888edb3/8aea6/DemoSSL-03.png 243w,\n/static/2444db75dc3326cf63bcdead3888edb3/44c61/DemoSSL-03.png 485w,\n/static/2444db75dc3326cf63bcdead3888edb3/587b0/DemoSSL-03.png 970w,\n/static/2444db75dc3326cf63bcdead3888edb3/5b795/DemoSSL-03.png 1455w,\n/static/2444db75dc3326cf63bcdead3888edb3/29114/DemoSSL-03.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>También, agregamos un Custom Domain, para ello debemos ser propietarios de ese dominio y previamente hemos tenido que generar un apunte CNAME o A para que supere la validación y pueda agregarlo.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd0520d87dcaf354babec8edabd82a32/29114/DemoSSL-04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABb0lEQVQoz5WRy0vDQBDG96/2UkSKFxEfiHpQVIQWFY+CioLgScWCVxFRqIVqTbPZx2x2s684SUS0l+KPjySbMN98MyFzG93F7aP22v7saqX5zYPO6U337LZ7fnd42Wt0cHF/fPWwsn/SWt5tLe3MLGy1Vvba6x2Sae21isGF6MpphBBAQVnG5kgY5N570PlIjACgsOgSfay+TwhRxvdex9oY6xyKCABrLUg5eOu/f3xQSrMso1yAmiRXOQP2Toc8Y1prTEFAyeA9l+rxpU+Tz4ymldKUMyb4H0nOGacjOsKbEFzlmmQSgnMC8qdhagwm0t67GL6Jtbxz2KCMEbOmSULHCQbknJNcQWEKXZgxKGsdxsMpJvaEdmiCD9r66+fx41A4WxSFIUxKiw2de2KA0+IwDpdRU1QlFWVzxWJvBlkiQDe5SMIYSIFGUkosw1e+pqkPv8Cjr8M3XgguTDXdkKn/uen/A+FKoF+oA/63+AtPX2xWhonUWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Add Custom Domain\"\n        title=\"Add Custom Domain\"\n        src=\"/static/bd0520d87dcaf354babec8edabd82a32/587b0/DemoSSL-04.png\"\n        srcset=\"/static/bd0520d87dcaf354babec8edabd82a32/8aea6/DemoSSL-04.png 243w,\n/static/bd0520d87dcaf354babec8edabd82a32/44c61/DemoSSL-04.png 485w,\n/static/bd0520d87dcaf354babec8edabd82a32/587b0/DemoSSL-04.png 970w,\n/static/bd0520d87dcaf354babec8edabd82a32/5b795/DemoSSL-04.png 1455w,\n/static/bd0520d87dcaf354babec8edabd82a32/29114/DemoSSL-04.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Una vez añadido el nuevo dominio, si navegamos hacia la web nos encontramos con que el sitio web tiene un error de certificado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/731ed99e8b205d0ccab9e90fb6d7d998/29114/DemoSSL-05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA00lEQVQoz62QUQqDMAyGexVhD65NW8VWnQjKGGzn2P3vkCWZikMF3fbwkzZNvv6JapoGWWVZYggBQwzovUfn3CEVRYGXukYFAGitlaSASHwHkqEcn/eKGUqaCTqXoVzQGh9JgilFTTLGzGqWPaPU2k/8kNFvt7bFrutEMUaZIPPkmpulFha9m0C23xKo73vZMe+XoXmoEJwX6FrvJpAjO+JR36KxadTT/Ynn6opWp4PLA8BV+RwtuYe9DsfCcclTnqPkzEfNVw4n2HCe33cBf9HfgS/no1G2egM6lQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Connection isn&#39;t private\"\n        title=\"Connection isn&#39;t private\"\n        src=\"/static/731ed99e8b205d0ccab9e90fb6d7d998/587b0/DemoSSL-05.png\"\n        srcset=\"/static/731ed99e8b205d0ccab9e90fb6d7d998/8aea6/DemoSSL-05.png 243w,\n/static/731ed99e8b205d0ccab9e90fb6d7d998/44c61/DemoSSL-05.png 485w,\n/static/731ed99e8b205d0ccab9e90fb6d7d998/587b0/DemoSSL-05.png 970w,\n/static/731ed99e8b205d0ccab9e90fb6d7d998/5b795/DemoSSL-05.png 1455w,\n/static/731ed99e8b205d0ccab9e90fb6d7d998/29114/DemoSSL-05.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>A continuación, podemos desplegar esta plantilla ARM construida por <a href=\"https://github.com/shibayan/keyvault-acmebot\" target=\"_blank\">Tatsuro Shibamura</a>, que nos permite seleccionar la entidad certificadora y desplegará una Azure Function y un Key Vault.\n<a href=\"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fshibayan%2Fkeyvault-acmebot%2Fmaster%2Fazuredeploy.json\" target=\"_blank\">\n<img src=\"https://azuredeploy.net/deploybutton.png\">\n</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4f6d0ab60950bd7540ffc1e0ae4d965e/29114/DemoSSL-06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABGElEQVQoz42RXUvDMBSG+38mrYsXm4i7su3c9Hd7NxzMi62LyARRMetH2qQ5SdudtlhExPbhJHBI3vNp3bje/d1yNrsm4/G541wQ4rmu77m+793O550tF4vpZHI2GjmO7dg2IeTqcmo9rter1epps6F0HwS7Z0rDIwuPNVEUdhbH0evhsNtu6b7+hocGgaVypbWuflBWVVFWvZRlafGIA0DRoACUwmiQa1M//gumtIQQGCaTeZxw9KHhVy1/YoypxZgTfwsh0Te6MWMGiTlvEkpIWKJSBQIgA50Py4yTFFmGjaacSynhm2HiVIQJqjU2ihV3DBLLNGbs6/3jkzGGu21vHATOs1/88MLfQlEYQKcoynZnvcp2zyfep1b2hwvfugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Deploy ARM\"\n        title=\"Deploy ARM\"\n        src=\"/static/4f6d0ab60950bd7540ffc1e0ae4d965e/587b0/DemoSSL-06.png\"\n        srcset=\"/static/4f6d0ab60950bd7540ffc1e0ae4d965e/8aea6/DemoSSL-06.png 243w,\n/static/4f6d0ab60950bd7540ffc1e0ae4d965e/44c61/DemoSSL-06.png 485w,\n/static/4f6d0ab60950bd7540ffc1e0ae4d965e/587b0/DemoSSL-06.png 970w,\n/static/4f6d0ab60950bd7540ffc1e0ae4d965e/5b795/DemoSSL-06.png 1455w,\n/static/4f6d0ab60950bd7540ffc1e0ae4d965e/29114/DemoSSL-06.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Tras completarse el despliegue, en el grupo de recursos tendremos los siguientes recursos nuevos con el prefijo que hemos establecido a la hora de desplegar la ARM:</p>\n<ul>\n<li>Application Insights</li>\n<li>Key Vault</li>\n<li>Service Plan</li>\n<li>Function App</li>\n<li>Storage Account</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/29114/DemoSSL-07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABQklEQVQoz51SXUsCQRSdHx5m9RiZYk+9VNai0VuQJPRuYfQcRCHYlrnu7nx/z9hNQ0gQwsPhzlku98w9w6JqM9k/vtyutyqHrUrtbO+ofXHTT7r3Sfeh03vs9AbA9u3g6u6pdnK9dXC620yqjfNKvbXTaCEuuVV89gdxldHPxSpQVhLBOaUMM15IW3CljXE++BD8vDrvlbHagY7AsKjxRyCpFHhIgBDOOyKU0FZZr32YrUGMERzhQFTIWQyUibd0UhDKGINFgFJwJYVWglFCMF5owRjGJWhYVXIGw3BzLCnvPw9f03E+nZR5VuTZby2m48/0Ix2BKPJpNhm/j4bLLsKUOGuZkC9fhEmllbbGLAktzhkQBHwqKRmlyy7CghhtIHIIa0OuAwJbD++p1CbDWDDv3IbD8JPA/vNEBlwg2/9dvgFU8m656h6kRAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Resources Deployed\"\n        title=\"Resources Deployed\"\n        src=\"/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/587b0/DemoSSL-07.png\"\n        srcset=\"/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/8aea6/DemoSSL-07.png 243w,\n/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/44c61/DemoSSL-07.png 485w,\n/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/587b0/DemoSSL-07.png 970w,\n/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/5b795/DemoSSL-07.png 1455w,\n/static/fbf3b80c8da30f7f9efcf5c6dd0081c7/29114/DemoSSL-07.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Crear registro de aplicación</h3>\n<p> Accedemos a la Function App en el Portal de Azure, y en el blade de <em>Authentication / Authorization</em> activamos la autenticación para el App Service y desactivamos el login anónimo, indicando que debe autenticar con el Azure AD.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab06e6d2619976f4ade533fa97f7cc2d/29114/DemoSSL-08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABGUlEQVQoz5WRTUsDMRCG88OlWHvw5EftwWPttlrwplAUehZFwZ8gFdRC3a67yWYmmUl2nbZeFCrty8MwCXlnholqdvr7p8NWu9c6SRpH3d12v3d9NxjdD0YPw9unFRc3j5fj58Pu1c7B2V7nXN40jpNmO1HkNZY6kGOmuuK6Dsu4kVRRYgjBeZ/lNjfeuiAXBlkDGSSziPwDLI/A1kegCqkSsyHvLdjJy8fb68w4Dz4gxf/gyi1RCKV0tgDTNPsqDDhCChuijC1lekCYpZ8yQgxbSOly0ZmZ52lGzHEbqUJrBPBEeZ4HEvsWUjrPjDHkcDJN3+emrqtYbSpVoPwwS+Y8oacYw2+k1FqU7NkhrvyyuT+1iWSJa/UNx0twCok+Q08AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Authentication / Authorization\"\n        title=\"Authentication / Authorization\"\n        src=\"/static/ab06e6d2619976f4ade533fa97f7cc2d/587b0/DemoSSL-08.png\"\n        srcset=\"/static/ab06e6d2619976f4ade533fa97f7cc2d/8aea6/DemoSSL-08.png 243w,\n/static/ab06e6d2619976f4ade533fa97f7cc2d/44c61/DemoSSL-08.png 485w,\n/static/ab06e6d2619976f4ade533fa97f7cc2d/587b0/DemoSSL-08.png 970w,\n/static/ab06e6d2619976f4ade533fa97f7cc2d/5b795/DemoSSL-08.png 1455w,\n/static/ab06e6d2619976f4ade533fa97f7cc2d/29114/DemoSSL-08.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Después configuramos el proveedor Azure Active Directory, con una configuración Express, indicamos el nombre de la app, aceptamos, y antes de salir del blade, guardamos la configuración.</p>\n<h3>Asignación de permisos sobre las políticas de acceso</h3>\n<p>Ahora necesitamos configurar los permisos que debe tener este registro de aplicación que se ha generado, para que pueda crear el certificado y asignárselo a la Web App.</p>\n<p>En primer lugar, debemos dar permisos sobre las políticas de acceso del Key Vault, para ello, en el propio Key Vault, en el blade de <em>Access policies</em>, agregamos una nueva política, seleccionando la plantilla <em>Certificate Management</em> y asignando el registro de aplicación que hemos creado en el paso anterior.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a8ff4e1ee5144c3f5813f5084d355f0e/29114/DemoSSL-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAu0lEQVQoz9WROwvCQBCE72eLBN+lBoNiax4axU4QUbBXFPwF9hYWJjHc3e7dJZ6xULDQaOXHFMPA7jIsKVteozcumk6h6RimXe/63mw9mG+0RsvdXf5iO1ntzf7UaNm1zrBieaW2W7VcIpEhp2mSpPkhlzhmjAHgOQgoZTxDJ0JIvfBZKkkyPQyhcYQASqkwjDggoNBIIXTy/vLhRCmgdhEoJhTIHAXIMRQob0e+KE3SH/jXYfUZ+n/8hSvkLHg0AuVzBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Access Policies\"\n        title=\"Access Policies\"\n        src=\"/static/a8ff4e1ee5144c3f5813f5084d355f0e/587b0/DemoSSL-10.png\"\n        srcset=\"/static/a8ff4e1ee5144c3f5813f5084d355f0e/8aea6/DemoSSL-10.png 243w,\n/static/a8ff4e1ee5144c3f5813f5084d355f0e/44c61/DemoSSL-10.png 485w,\n/static/a8ff4e1ee5144c3f5813f5084d355f0e/587b0/DemoSSL-10.png 970w,\n/static/a8ff4e1ee5144c3f5813f5084d355f0e/5b795/DemoSSL-10.png 1455w,\n/static/a8ff4e1ee5144c3f5813f5084d355f0e/29114/DemoSSL-10.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Antes de salir del Key Vault, copiamos la url del mismo y la guardamos para utilizarla más adelante.</p>\n<h3>Configuración de acceso</h3>\n<p>En el grupo de recursos, en el blade de configuración del RBAC, <em>Access control (IAM)</em>, agregamos un nuevo rol de \"DNS Zone Contributor\" al registro de aplicación. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e49a183f0ea08f18ee59428fb4145f9/29114/DemoSSL-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABiElEQVQoz41RS0sDQQzeX+3B6kE9eKgPVDwoaJFSqx4FRcG7j4p4EQVPotDH7truziOTmcms2ba0KAqGIUwm+ZIv30QLW43qzvHCxsHcam1+/WBpu1k/u26c3zTOb48u7/k0L1uHF3cnVw9rtdPKyv5sdW9mebeyWlvcrEdgwIIqCh+8LUIoCj409JP71ELgKijIlqkQorifgVZCin4mwBgNBtEqg4DoPREF9OQp8IU7W+uSOMlzAWC0hkhKEcgLkXe7XZHnmVTkfOZsmvXTJHUIrxI7SZomiUV0RL0sB629c8aYSGgIgbiN1ppj57iAHPnnjkqEcZ6k0Y8fwlhXBky7XK00732UK8OcAICDYrgl2wCw3Uu7ccxNFbx14t7nZ59bj9MT8CDPLFpOjMATZV46KpXovOeBT209nkzEkrDnEleCVYYGmfPoaaoqldqPFHc0HskrDbRx1nLIG0ZCSp7JtH+Ai98shGlmSFsJlu7/4G87Sy2Rf5aZ/AEYw4ZeIrXeFdMeNfoC7lVvvH5TKksAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Add DNS Zone Contributor\"\n        title=\"Add DNS Zone Contributor\"\n        src=\"/static/8e49a183f0ea08f18ee59428fb4145f9/587b0/DemoSSL-11.png\"\n        srcset=\"/static/8e49a183f0ea08f18ee59428fb4145f9/8aea6/DemoSSL-11.png 243w,\n/static/8e49a183f0ea08f18ee59428fb4145f9/44c61/DemoSSL-11.png 485w,\n/static/8e49a183f0ea08f18ee59428fb4145f9/587b0/DemoSSL-11.png 970w,\n/static/8e49a183f0ea08f18ee59428fb4145f9/5b795/DemoSSL-11.png 1455w,\n/static/8e49a183f0ea08f18ee59428fb4145f9/29114/DemoSSL-11.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Repetimos nuevamente el paso anterior, pero esta vez asignamos el rol de \"DNS Zone Contributor\" al App Service.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/5ba90/DemoSSL-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.053497942386832%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAS0lEQVQI1zWKSQ6AMAzE+v+PwgWpqEJZJyG01Kd4nHZefZCIqoiYmep3AYiJIsjgW2uvn9i0Y9BNtZi72wSTlR9F52q/VmXmzFz6Avv+dbmWlG0hAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DNS Zone Contributors\"\n        title=\"DNS Zone Contributors\"\n        src=\"/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/587b0/DemoSSL-12.png\"\n        srcset=\"/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/8aea6/DemoSSL-12.png 243w,\n/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/44c61/DemoSSL-12.png 485w,\n/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/587b0/DemoSSL-12.png 970w,\n/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/5b795/DemoSSL-12.png 1455w,\n/static/5c1e7c7dac1eb2eb484ba7e0d5949ee9/5ba90/DemoSSL-12.png 1604w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Creación de un nuevo certificado</h3>\n<p>Tras completar los pasos anteriores, volvemos nuevamente a la Azure Function y confirmamos que tiene configurada la url del Key Vault como setting en el blade de <em>Configuration</em>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3318e301cded79de905d1f8e0714800a/29114/DemoSSL-13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABK0lEQVQoz5VRTUsDQQzd3y0irb0IorQqeNPaalvxVBCs4l2x2v8g3pRiu5tkMpPJ1uzoQURpfTyYEObl4yWr7Z1uHfYbrZN6s722fdQ46HUv73pX9/3Rw/nN0+D6cTAaW3xxO9k9Hq7vtDf3z2qt7kazU291MmbnINfAC5WKCRpDZIxMGr8yv6HM5kAxRmY/zQlc8KJGQPLeI7q31+k8pwLZ+Ujf6ILm4EwMofqHAIhEQSQES3gRUdWqfqlGe38wRskcgXUmInZsgapl1YLFMtifrECwQsxsepGYWpWrinOE1FA5oUxYVfw+m0GRB1/tmZrLP8RQzAnRPHIJprQpVhXPiKME88lVF3fmto1ghn8uv6yz+cxs07Kdx0SVZzp+LiYvGEWsHP0Bu+4H309y2IUJcIIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Key Vault Setting\"\n        title=\"Key Vault Setting\"\n        src=\"/static/3318e301cded79de905d1f8e0714800a/587b0/DemoSSL-13.png\"\n        srcset=\"/static/3318e301cded79de905d1f8e0714800a/8aea6/DemoSSL-13.png 243w,\n/static/3318e301cded79de905d1f8e0714800a/44c61/DemoSSL-13.png 485w,\n/static/3318e301cded79de905d1f8e0714800a/587b0/DemoSSL-13.png 970w,\n/static/3318e301cded79de905d1f8e0714800a/5b795/DemoSSL-13.png 1455w,\n/static/3318e301cded79de905d1f8e0714800a/29114/DemoSSL-13.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Accedemos a la url de la Azure Function, en mi caso <a href=\"https://acmebotdemossl-grw7.azurewebsites.net/add-certificate\">https://acmebotdemossl-grw7.azurewebsites.net/add-certificate</a>, y tras autenticar, nos aparece un formulario web en el que podemos seleccionar la Zona DNS y agregar un nuevo subdominio.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/73dfeb2061a5e45ee547c2d73bae12eb/29114/DemoSSL-14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAuUlEQVQoz+WQQQ7CIBBFOWpJk3ahdtfeUS/gDRpNTEwQSmsZvoA1oVqM6dYffgZmmJcB1jQN6rpGVVUoigJlWYaY5zk45+BZhiyYP88J+57ddgOGSFprKKVA1mKtmHXN3kQUohACvZQYO41O9zCDxvEk0Yp7aKDp/pI9g80S02QHccH+egYMuWWgBoN+JFdJw2ZAr1fS60YjpAOFfPQcm/iKmMHeYXFT2EcTpKAfwKXCN8DPwLX6c+ADB0hF2ATw64EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"New Subdomain\"\n        title=\"New Subdomain\"\n        src=\"/static/73dfeb2061a5e45ee547c2d73bae12eb/587b0/DemoSSL-14.png\"\n        srcset=\"/static/73dfeb2061a5e45ee547c2d73bae12eb/8aea6/DemoSSL-14.png 243w,\n/static/73dfeb2061a5e45ee547c2d73bae12eb/44c61/DemoSSL-14.png 485w,\n/static/73dfeb2061a5e45ee547c2d73bae12eb/587b0/DemoSSL-14.png 970w,\n/static/73dfeb2061a5e45ee547c2d73bae12eb/5b795/DemoSSL-14.png 1455w,\n/static/73dfeb2061a5e45ee547c2d73bae12eb/29114/DemoSSL-14.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Al enviar el formulario, en un lapso de menos de un minuto se habrá generado un certificado digital.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d933c0b8d953ad2d6fec5a5836d79c78/29114/DemoSSL-15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7klEQVQoz+WPvU7DMBSF/TzASLp2gYqNKYJmSqT8DEC25HFY2XgO9ioLQolYYAH6R7BASj7sNK2SymXoypGvjmzf8/lapGlKkiTEcUwYhkRR1HgQBNi2zbFlMRhYWMqPDg8YnZ7g+z6u6+J53qZ05ub6CkFHUkrKsqSuqmafZRnjywscx2l8eHbO7d09f0nUdY2uSkEq5Z/LJW/zGYuvko/pnIfJI0WeUxQ5T8Uz7+pMa53rlmaI7UPUevmWvP7IVdAwhQnWA66b0BdbQfX/1fRtdft72dZF70Va6GbavpsgRqDpwhTcpZ3AffXPgb8nuzjKM83j+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"New Certificate\"\n        title=\"New Certificate\"\n        src=\"/static/d933c0b8d953ad2d6fec5a5836d79c78/587b0/DemoSSL-15.png\"\n        srcset=\"/static/d933c0b8d953ad2d6fec5a5836d79c78/8aea6/DemoSSL-15.png 243w,\n/static/d933c0b8d953ad2d6fec5a5836d79c78/44c61/DemoSSL-15.png 485w,\n/static/d933c0b8d953ad2d6fec5a5836d79c78/587b0/DemoSSL-15.png 970w,\n/static/d933c0b8d953ad2d6fec5a5836d79c78/5b795/DemoSSL-15.png 1455w,\n/static/d933c0b8d953ad2d6fec5a5836d79c78/29114/DemoSSL-15.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>El siguiente paso, es ir a la Web App, y asociar el certificado del Key Vault, para ello, accedemos al blade de <em>TLS/SSL Settings</em> de la Web App, y en la pestaña de <em>Private Key Certificates (.pfx)</em>, realizamos la importación desde un Key Vault.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa02873d3e549f6d83e116c2e45580c0/29114/DemoSSL-16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz41QTUsDMRDND1VRoScPnotSpGgF8VxkD2pREP+EH+DZu3dFaLt2szP5nGzibLfiWoT28ZgMmTd5MxGd/uXeYNQ5ynZ62fZh1ulfHV8/nIwemae3zw0HN09ndy/75/dbBxes2ewON7rD3V4mpJyRKsiUZCBVNgWdIqXkU4ppGVUVjIU8WmCyWEhlQwjOe+OIc9TOUWBWse5uk0EUJpPCGG9tYIoSlXMOEb+KYjrNCyk1Q6l5RATgkmIg6vrQudQFWmapvQCEKgS+/RznUkrv+VVrjCEijlCWCsHNbxictNcQBWJFBEq/vU/ZjBXpn12rJkZGu5knq590LgR29WwY40ITf7Bomyd/nEFrIt+U0yosacR4NkMo2XPN5rZKSAD+SZ42rYFlZ9BQr7Jq7KaGLrx+/P7oN9xZbYraDkRzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Binding Key Vault\"\n        title=\"Binding Key Vault\"\n        src=\"/static/fa02873d3e549f6d83e116c2e45580c0/587b0/DemoSSL-16.png\"\n        srcset=\"/static/fa02873d3e549f6d83e116c2e45580c0/8aea6/DemoSSL-16.png 243w,\n/static/fa02873d3e549f6d83e116c2e45580c0/44c61/DemoSSL-16.png 485w,\n/static/fa02873d3e549f6d83e116c2e45580c0/587b0/DemoSSL-16.png 970w,\n/static/fa02873d3e549f6d83e116c2e45580c0/5b795/DemoSSL-16.png 1455w,\n/static/fa02873d3e549f6d83e116c2e45580c0/29114/DemoSSL-16.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Al terminar la importación, el certificado estará enlazado a la Web App.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3dd551aed5ed822e8c9ec5da7024ee81/29114/DemoSSL-17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABLUlEQVQoz52QW07DMBBFvdNCKX9ILIBCUQVFQiyAUh6tQEJsgofEGtgAP1C1JI4ntsdPJjGJEHy1R6N4kpnruRPWG17tjGbdg3GnP97oX2wPb46mj8ezJ4qTu5cUo9vn0/vX3bOHzt557/C6O7jc3J9sDSaM88yUuVWF1SJ6FZ2MwcZoYgzxLz5GKrn6WfUwXmrnHBqj0FIOEtE6Ch8q9e9oaXNWQImIAPCV54vFMudcEmUpZTobAKoXqTQaay2ioZFMgKCDPn/Ml5znxhittVKq7kAlJWpNuarRiK7Be89yAO8szX97/6QyTfu3aiRxCCEJQs2PbQBBNyqaYYC2QYOpo9qt6Uuy5IWsUZ6qTEhprWkFK8HmWQaioPvWEXMh6E+Spbg6ZFsE79ez/Q0Q/m7vAtk7VgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Healthy Certificate\"\n        title=\"Healthy Certificate\"\n        src=\"/static/3dd551aed5ed822e8c9ec5da7024ee81/587b0/DemoSSL-17.png\"\n        srcset=\"/static/3dd551aed5ed822e8c9ec5da7024ee81/8aea6/DemoSSL-17.png 243w,\n/static/3dd551aed5ed822e8c9ec5da7024ee81/44c61/DemoSSL-17.png 485w,\n/static/3dd551aed5ed822e8c9ec5da7024ee81/587b0/DemoSSL-17.png 970w,\n/static/3dd551aed5ed822e8c9ec5da7024ee81/5b795/DemoSSL-17.png 1455w,\n/static/3dd551aed5ed822e8c9ec5da7024ee81/29114/DemoSSL-17.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Para finalizar, necesitamos ir al blade <em>Custom domains</em>, y asociar enlazar el certificado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64cc905f5b95dc6a3ac89fbd9830f38d/29114/DemoSSL-18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.32098765432099%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABcUlEQVQoz22QSU4DMRBFfVIGASsWHIBJCqMQBwCyCBFIiEuAGA7BKohBKHQ6bbddnu021ekkJIKnL6uH+v5VRVZbnfXD7sLm2eLW+dL2xVqrs3d5t9+9P+jeH18/Njq6eji5ed44vcWy5c2z+txpr+y2Sc5LDywagUpepaBTihNVM0KiDzpnhQWWkk8pkFKaGKKxVqqhUcIZ+SstrYbmOTidgrVWf2T5sKCUca4s4SCdtSXwr+Kdl0xrjSXG+TghNBrhnBtm34KXBsuMIQJECFFK+dZ77ff7WZYNUIOcsv8oy++CF6ApGK4cYQDBe6l0P2fGGIyqqqo5p+DMDfjdx2q8kioRKQHbRHPvc4BmAPDep3mcR0u9s9FFv5BSCOzeWSOAYZFSCmeb/B0H2lCP3STPmTNGFQhl3QuVlFJcGCa7ETaMu59eUy+wStN0IiRoVRsABJ5xZrFInAFfZ5oambnijeHvqH9RLj69Km7q5jH/B9FZaQsViB5OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Binding Certificate\"\n        title=\"Binding Certificate\"\n        src=\"/static/64cc905f5b95dc6a3ac89fbd9830f38d/587b0/DemoSSL-18.png\"\n        srcset=\"/static/64cc905f5b95dc6a3ac89fbd9830f38d/8aea6/DemoSSL-18.png 243w,\n/static/64cc905f5b95dc6a3ac89fbd9830f38d/44c61/DemoSSL-18.png 485w,\n/static/64cc905f5b95dc6a3ac89fbd9830f38d/587b0/DemoSSL-18.png 970w,\n/static/64cc905f5b95dc6a3ac89fbd9830f38d/5b795/DemoSSL-18.png 1455w,\n/static/64cc905f5b95dc6a3ac89fbd9830f38d/29114/DemoSSL-18.png 1920w\"\n        sizes=\"(max-width: 970px) 100vw, 970px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Conclusiones</h3>\n<p>Esta implementación, a priori sencilla, tiene la posibilidad de utilizar una configuración para conectar la Azure Function a un webhook de Teams o de Slack, en el que se notifique las acciones que se van sucediendo, para que así se pueda hacer un seguimiento por si algo no hubiera ido bien.</p>\n<p>Este proceso, aunque parece un poco enrevesado, una vez está instalado en nuestra suscripción, puede gestionar varios certificados digitales al mismo tiempo, y se simplificará muchísimo el seguimiento y sobre todo, los costes económicos que supone la compra y renovación de certificados.</p>","frontmatter":{"title":"SSL gratis para un custom domain","date":"2020, Jul 20","description":"Cómo crear un certificado digital gratis y válido para convertir tu sitio web en seguro.","tags":["Azure","Free","Functions","LetsEncrypt","SSL","WebApp"],"img":{"childImageSharp":{"fluid":{"aspectRatio":1.4668769716088328,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAG4kvjSNgmB/8QAGBABAQEBAQAAAAAAAAAAAAAAAQIAEgP/2gAIAQEAAQUC1+iaaKnp1z3hQ//EABYRAQEBAAAAAAAAAAAAAAAAAAATAf/aAAgBAwEBPwGmKv/EABYRAQEBAAAAAAAAAAAAAAAAAAASAf/aAAgBAgEBPwGNQ//EABoQAAMAAwEAAAAAAAAAAAAAAAABESEiMXH/2gAIAQEABj8CNWl6U6ZpEz//xAAcEAEAAgEFAAAAAAAAAAAAAAABACEQETFBUYH/2gAIAQEAAT8hqcQzcENR5jBR9t4CQBP/2gAMAwEAAgADAAAAEHMv/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBIVH/2gAIAQMBAT8QdFiYf//EABcRAAMBAAAAAAAAAAAAAAAAAAABEVH/2gAIAQIBAT8Qk1C9P//EABwQAQACAgMBAAAAAAAAAAAAAAEAESGBMUFRcf/aAAgBAQABPxBR2aZej2Sb0eywBfLkaijyPkGFi7VS2GQKgOp//9k=","sizes":"(max-width: 1920px) 100vw, 1920px","src":"/static/836b0ffa603d2a11cdeacb1a534cfc74/d8255/SSL.jpg","srcSet":"/static/836b0ffa603d2a11cdeacb1a534cfc74/2f037/SSL.jpg 930w,\n/static/836b0ffa603d2a11cdeacb1a534cfc74/23f4e/SSL.jpg 1860w,\n/static/836b0ffa603d2a11cdeacb1a534cfc74/d8255/SSL.jpg 1920w"}}}}}},"pageContext":{"slug":"/2020/07/20/","previous":{"fields":{"slug":"/2020/07/12/"},"frontmatter":{"title":"Visual Studio Codespaces","tags":["Codespaces","Develop","VSCode"],"img":{"childImageSharp":{"fluid":{"aspectRatio":1.941544885177453,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe9NjQf/xAAXEAEAAwAAAAAAAAAAAAAAAAABAiAx/9oACAEBAAEFAnIq1//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAABICH/2gAIAQEABj8CNU//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEgQWH/2gAIAQEAAT8hVJC+TQGP/9oADAMBAAIAAwAAABDwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAERIQAgQVFx/9oACAEBAAE/EEYEEg5yUk6U17r/AP/Z","sizes":"(max-width: 1940px) 100vw, 1940px","src":"/static/764de9081784b0668d2716a3f6b8fe6b/6b48d/Codespaces.jpg","srcSet":"/static/764de9081784b0668d2716a3f6b8fe6b/2f037/Codespaces.jpg 930w,\n/static/764de9081784b0668d2716a3f6b8fe6b/23f4e/Codespaces.jpg 1860w,\n/static/764de9081784b0668d2716a3f6b8fe6b/6b48d/Codespaces.jpg 1940w"}}}}},"next":null}},"staticQueryHashes":["2744294623","3114762285","550521386","764694655"]}