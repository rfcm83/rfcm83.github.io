{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/05/31/","result":{"data":{"site":{"siteMetadata":{"title":"SetValue.NET","author":"Raúl Fernández de Córdoba","siteUrl":"http://setvalue.net"}},"markdownRemark":{"id":"34926cca-c692-5b2e-858c-347f36fa992a","excerpt":"En el anterior post hablábamos de las Durable Function, de los tipos que había y cómo gracias al Framework de las Durable Function se podía realizar tareas de…","html":"<p>En el anterior <a href=\"/2020/05/30/\" target=\"_blank\">post</a> hablábamos de las Durable Function, de los tipos que había y cómo gracias al Framework de las Durable Function se podía realizar tareas de ejecución prolongada (<em>long-running</em>).</p>\n<p>En este post vamos a ver los distintos patrones que existen para así poder definir una estrategia que se adapte al escenario que estemos desarrollando.</p>\n<h2>Patrones</h2>\n<p>El principal caso de uso de las Durable Function es simplificar la complejidad, y la coordinación del estado con los distintos requerimientos, para lograr este objetivo, vemos los principales patrones:</p>\n<ul>\n<li>Function chaining</li>\n<li>Fan-out/fan-in</li>\n<li>Async HTTP APIs</li>\n<li>Monitoring</li>\n<li>Human interaction</li>\n<li>Aggregator (stateful entities)</li>\n</ul>\n<p>A continuación, pasamos a detallar la definición de cada uno.</p>\n<h3>Function chaining</h3>\n<p>Es un encadenamiento de ejecución de Functions en un orden específico. El output de una Function podría ser el input de la siguiente.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1590955461985\" width=\"926.46875\" xmlns=\"http://www.w3.org/2000/svg\" height=\"106.84375\" viewBox=\"0 0 926.46875 106.84375\"><style>#mermaid-1590955461985 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1590955461985 .label text{fill:#333}#mermaid-1590955461985 .node rect,#mermaid-1590955461985 .node circle,#mermaid-1590955461985 .node ellipse,#mermaid-1590955461985 .node polygon,#mermaid-1590955461985 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955461985 .node .label{text-align:center}#mermaid-1590955461985 .node.clickable{cursor:pointer}#mermaid-1590955461985 .arrowheadPath{fill:#333}#mermaid-1590955461985 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1590955461985 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1590955461985 .edgeLabel rect{opacity:0.5}#mermaid-1590955461985 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1590955461985 .cluster text{fill:#333}#mermaid-1590955461985 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1590955461985 .actor{stroke:#999;fill:#eee}#mermaid-1590955461985 text.actor{fill:#333;stroke:none}#mermaid-1590955461985 .actor-line{stroke:#666}#mermaid-1590955461985 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955461985 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955461985 #arrowhead{fill:#333}#mermaid-1590955461985 .sequenceNumber{fill:#fff}#mermaid-1590955461985 #sequencenumber{fill:#333}#mermaid-1590955461985 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1590955461985 .messageText{fill:#333;stroke:none}#mermaid-1590955461985 .labelBox{stroke:#999;fill:#eee}#mermaid-1590955461985 .labelText{fill:#333;stroke:none}#mermaid-1590955461985 .loopText{fill:#333;stroke:none}#mermaid-1590955461985 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1590955461985 .note{stroke:#770;fill:#ffa}#mermaid-1590955461985 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1590955461985 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1590955461985 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1590955461985 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1590955461985 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .section{stroke:none;opacity:0.2}#mermaid-1590955461985 .section0{fill:#80b3e6}#mermaid-1590955461985 .section2{fill:#80b3e6}#mermaid-1590955461985 .section1,#mermaid-1590955461985 .section3{fill:#fff;opacity:0.2}#mermaid-1590955461985 .sectionTitle0{fill:#333}#mermaid-1590955461985 .sectionTitle1{fill:#333}#mermaid-1590955461985 .sectionTitle2{fill:#333}#mermaid-1590955461985 .sectionTitle3{fill:#333}#mermaid-1590955461985 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1590955461985 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .grid path{stroke-width:0}#mermaid-1590955461985 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1590955461985 .task{stroke-width:2}#mermaid-1590955461985 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .taskText:not([font-size]){font-size:11px}#mermaid-1590955461985 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1590955461985 .task.clickable{cursor:pointer}#mermaid-1590955461985 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955461985 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955461985 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955461985 .taskText0,#mermaid-1590955461985 .taskText1,#mermaid-1590955461985 .taskText2,#mermaid-1590955461985 .taskText3{fill:#fff}#mermaid-1590955461985 .task0,#mermaid-1590955461985 .task1,#mermaid-1590955461985 .task2,#mermaid-1590955461985 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1590955461985 .taskTextOutside0,#mermaid-1590955461985 .taskTextOutside2{fill:#333}#mermaid-1590955461985 .taskTextOutside1,#mermaid-1590955461985 .taskTextOutside3{fill:#333}#mermaid-1590955461985 .active0,#mermaid-1590955461985 .active1,#mermaid-1590955461985 .active2,#mermaid-1590955461985 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1590955461985 .activeText0,#mermaid-1590955461985 .activeText1,#mermaid-1590955461985 .activeText2,#mermaid-1590955461985 .activeText3{fill:#333 !important}#mermaid-1590955461985 .done0,#mermaid-1590955461985 .done1,#mermaid-1590955461985 .done2,#mermaid-1590955461985 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1590955461985 .doneText0,#mermaid-1590955461985 .doneText1,#mermaid-1590955461985 .doneText2,#mermaid-1590955461985 .doneText3{fill:#333 !important}#mermaid-1590955461985 .crit0,#mermaid-1590955461985 .crit1,#mermaid-1590955461985 .crit2,#mermaid-1590955461985 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1590955461985 .activeCrit0,#mermaid-1590955461985 .activeCrit1,#mermaid-1590955461985 .activeCrit2,#mermaid-1590955461985 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1590955461985 .doneCrit0,#mermaid-1590955461985 .doneCrit1,#mermaid-1590955461985 .doneCrit2,#mermaid-1590955461985 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1590955461985 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1590955461985 .milestoneText{font-style:italic}#mermaid-1590955461985 .doneCritText0,#mermaid-1590955461985 .doneCritText1,#mermaid-1590955461985 .doneCritText2,#mermaid-1590955461985 .doneCritText3{fill:#333 !important}#mermaid-1590955461985 .activeCritText0,#mermaid-1590955461985 .activeCritText1,#mermaid-1590955461985 .activeCritText2,#mermaid-1590955461985 .activeCritText3{fill:#333 !important}#mermaid-1590955461985 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1590955461985 g.classGroup text .title{font-weight:bolder}#mermaid-1590955461985 g.clickable{cursor:pointer}#mermaid-1590955461985 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1590955461985 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1590955461985 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955461985 .classLabel .label{fill:#999;font-size:10px}#mermaid-1590955461985 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955461985 .dashed-line{stroke-dasharray:3}#mermaid-1590955461985 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955461985 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955461985 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955461985 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955461985 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955461985 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955461985 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955461985 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955461985 .commit-id,#mermaid-1590955461985 .commit-msg,#mermaid-1590955461985 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1590955461985 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1590955461985 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1590955461985 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1590955461985 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955461985 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1590955461985 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1590955461985 .state-note{stroke:#770;fill:#ffa}#mermaid-1590955461985 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1590955461985 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955461985 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955461985 .node circle.state-start{fill:black;stroke:black}#mermaid-1590955461985 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1590955461985 #statediagram-barbEnd{fill:#999}#mermaid-1590955461985 .statediagram-cluster rect{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955461985 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1590955461985 .statediagram-state .divider{stroke:#999}#mermaid-1590955461985 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1590955461985 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1590955461985 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1590955461985 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1590955461985 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1590955461985 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1590955461985 .note-edge{stroke-dasharray:5}#mermaid-1590955461985 .statediagram-note rect{fill:#ffa;stroke:#770;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1590955461985 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M100.046875,53.421875L125.046875,53.421875L150.046875,53.421875\" marker-end=\"url(#arrowhead32)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead32\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M224.890625,53.421875L249.890625,53.421875L274.890625,53.421875\" marker-end=\"url(#arrowhead33)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead33\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M366.9375,53.421875L391.9375,53.421875L416.9375,53.421875\" marker-end=\"url(#arrowhead34)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead34\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M491.78125,53.421875L516.78125,53.421875L541.78125,53.421875\" marker-end=\"url(#arrowhead35)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead35\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M634.703125,53.421875L659.703125,53.421875L684.703125,53.421875\" marker-end=\"url(#arrowhead36)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead36\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M775.546875,53.421875L800.546875,53.421875L825.546875,53.421875\" marker-end=\"url(#arrowhead37)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead37\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"A\" transform=\"translate(54.0234375,53.421875)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.0234375\" y=\"-19\" width=\"92.046875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.0234375,-9)\"><foreignObject width=\"72.046875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionA</div></foreignObject></g></g></g><g class=\"node default\" id=\"B\" transform=\"translate(187.46875,53.421875)\" style=\"opacity: 1;\"><circle x=\"-37.421875\" y=\"-19\" r=\"37.421875\" class=\"label-container\"></circle><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-27.421875,-9)\"><foreignObject width=\"54.84375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Do stuff</div></foreignObject></g></g></g><g class=\"node default\" id=\"C\" transform=\"translate(320.9140625,53.421875)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.0234375\" y=\"-19\" width=\"92.046875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.0234375,-9)\"><foreignObject width=\"72.046875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionB</div></foreignObject></g></g></g><g class=\"node default\" id=\"D\" transform=\"translate(454.359375,53.421875)\" style=\"opacity: 1;\"><circle x=\"-37.421875\" y=\"-19\" r=\"37.421875\" class=\"label-container\"></circle><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-27.421875,-9)\"><foreignObject width=\"54.84375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Do stuff</div></foreignObject></g></g></g><g class=\"node default\" id=\"E\" transform=\"translate(588.2421875,53.421875)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.4609375\" y=\"-19\" width=\"92.921875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.4609375,-9)\"><foreignObject width=\"72.921875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionC</div></foreignObject></g></g></g><g class=\"node default\" id=\"F\" transform=\"translate(730.125,53.421875)\" style=\"opacity: 1;\"><circle x=\"-45.421875\" y=\"-19\" r=\"45.421875\" class=\"label-container\"></circle><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-35.421875,-9)\"><foreignObject width=\"70.84375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">More stuff</div></foreignObject></g></g></g><g class=\"node default\" id=\"G\" transform=\"translate(872.0078125,53.421875)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.4609375\" y=\"-19\" width=\"92.921875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.4609375,-9)\"><foreignObject width=\"72.921875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionD</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>En el ejemplo siguiente, cuatro Functions son desencadenadas de forma que la siguiente recibe por parámetro el valor resultante de la ejecución anterior.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"ChainingPatternFunction\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">OrchestrationTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableOrchestrationContext</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionA\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionB\"</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionC\"</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> d <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">object</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionD\"</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> d<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> ex<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        Debug<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">throw</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Como vimos en el anterior <a href=\"/2020/05/30/\" target=\"_blank\">post</a>, el objeto <code class=\"language-text\">context</code> puede ser utilizado para llamar a otras Functions por nombre, pasar parámetros o devolver el resultado de la ejecución.</p>\n<h3>Fan-out/fan-in (Distribución ramificada de salida y de entrada)</h3>\n<p>En este patrón, ejeuctamos múltiples Functions en paralelo y esperamos a que todas finalicen.</p>\n<p>En el siguiente gráfico de ejemplo, las Functions B, C y D son ejecutadas en paralelo y luego pasan a ejecutar la Function E, quién podría utilizar el resultado de las otras tres para realizar su procesamiento.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1590955462092\" width=\"393.015625\" xmlns=\"http://www.w3.org/2000/svg\" height=\"230\" viewBox=\"0 0 393.015625 230\"><style>#mermaid-1590955462092 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1590955462092 .label text{fill:#333}#mermaid-1590955462092 .node rect,#mermaid-1590955462092 .node circle,#mermaid-1590955462092 .node ellipse,#mermaid-1590955462092 .node polygon,#mermaid-1590955462092 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462092 .node .label{text-align:center}#mermaid-1590955462092 .node.clickable{cursor:pointer}#mermaid-1590955462092 .arrowheadPath{fill:#333}#mermaid-1590955462092 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1590955462092 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1590955462092 .edgeLabel rect{opacity:0.5}#mermaid-1590955462092 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1590955462092 .cluster text{fill:#333}#mermaid-1590955462092 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1590955462092 .actor{stroke:#999;fill:#eee}#mermaid-1590955462092 text.actor{fill:#333;stroke:none}#mermaid-1590955462092 .actor-line{stroke:#666}#mermaid-1590955462092 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462092 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462092 #arrowhead{fill:#333}#mermaid-1590955462092 .sequenceNumber{fill:#fff}#mermaid-1590955462092 #sequencenumber{fill:#333}#mermaid-1590955462092 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1590955462092 .messageText{fill:#333;stroke:none}#mermaid-1590955462092 .labelBox{stroke:#999;fill:#eee}#mermaid-1590955462092 .labelText{fill:#333;stroke:none}#mermaid-1590955462092 .loopText{fill:#333;stroke:none}#mermaid-1590955462092 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1590955462092 .note{stroke:#770;fill:#ffa}#mermaid-1590955462092 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1590955462092 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1590955462092 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1590955462092 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1590955462092 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .section{stroke:none;opacity:0.2}#mermaid-1590955462092 .section0{fill:#80b3e6}#mermaid-1590955462092 .section2{fill:#80b3e6}#mermaid-1590955462092 .section1,#mermaid-1590955462092 .section3{fill:#fff;opacity:0.2}#mermaid-1590955462092 .sectionTitle0{fill:#333}#mermaid-1590955462092 .sectionTitle1{fill:#333}#mermaid-1590955462092 .sectionTitle2{fill:#333}#mermaid-1590955462092 .sectionTitle3{fill:#333}#mermaid-1590955462092 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1590955462092 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .grid path{stroke-width:0}#mermaid-1590955462092 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1590955462092 .task{stroke-width:2}#mermaid-1590955462092 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .taskText:not([font-size]){font-size:11px}#mermaid-1590955462092 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1590955462092 .task.clickable{cursor:pointer}#mermaid-1590955462092 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462092 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462092 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462092 .taskText0,#mermaid-1590955462092 .taskText1,#mermaid-1590955462092 .taskText2,#mermaid-1590955462092 .taskText3{fill:#fff}#mermaid-1590955462092 .task0,#mermaid-1590955462092 .task1,#mermaid-1590955462092 .task2,#mermaid-1590955462092 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1590955462092 .taskTextOutside0,#mermaid-1590955462092 .taskTextOutside2{fill:#333}#mermaid-1590955462092 .taskTextOutside1,#mermaid-1590955462092 .taskTextOutside3{fill:#333}#mermaid-1590955462092 .active0,#mermaid-1590955462092 .active1,#mermaid-1590955462092 .active2,#mermaid-1590955462092 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1590955462092 .activeText0,#mermaid-1590955462092 .activeText1,#mermaid-1590955462092 .activeText2,#mermaid-1590955462092 .activeText3{fill:#333 !important}#mermaid-1590955462092 .done0,#mermaid-1590955462092 .done1,#mermaid-1590955462092 .done2,#mermaid-1590955462092 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1590955462092 .doneText0,#mermaid-1590955462092 .doneText1,#mermaid-1590955462092 .doneText2,#mermaid-1590955462092 .doneText3{fill:#333 !important}#mermaid-1590955462092 .crit0,#mermaid-1590955462092 .crit1,#mermaid-1590955462092 .crit2,#mermaid-1590955462092 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1590955462092 .activeCrit0,#mermaid-1590955462092 .activeCrit1,#mermaid-1590955462092 .activeCrit2,#mermaid-1590955462092 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1590955462092 .doneCrit0,#mermaid-1590955462092 .doneCrit1,#mermaid-1590955462092 .doneCrit2,#mermaid-1590955462092 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1590955462092 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1590955462092 .milestoneText{font-style:italic}#mermaid-1590955462092 .doneCritText0,#mermaid-1590955462092 .doneCritText1,#mermaid-1590955462092 .doneCritText2,#mermaid-1590955462092 .doneCritText3{fill:#333 !important}#mermaid-1590955462092 .activeCritText0,#mermaid-1590955462092 .activeCritText1,#mermaid-1590955462092 .activeCritText2,#mermaid-1590955462092 .activeCritText3{fill:#333 !important}#mermaid-1590955462092 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1590955462092 g.classGroup text .title{font-weight:bolder}#mermaid-1590955462092 g.clickable{cursor:pointer}#mermaid-1590955462092 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462092 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462092 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462092 .classLabel .label{fill:#999;font-size:10px}#mermaid-1590955462092 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462092 .dashed-line{stroke-dasharray:3}#mermaid-1590955462092 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462092 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462092 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462092 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462092 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462092 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462092 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462092 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462092 .commit-id,#mermaid-1590955462092 .commit-msg,#mermaid-1590955462092 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1590955462092 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1590955462092 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462092 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462092 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462092 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1590955462092 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1590955462092 .state-note{stroke:#770;fill:#ffa}#mermaid-1590955462092 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1590955462092 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462092 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462092 .node circle.state-start{fill:black;stroke:black}#mermaid-1590955462092 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1590955462092 #statediagram-barbEnd{fill:#999}#mermaid-1590955462092 .statediagram-cluster rect{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462092 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1590955462092 .statediagram-state .divider{stroke:#999}#mermaid-1590955462092 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1590955462092 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1590955462092 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1590955462092 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1590955462092 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1590955462092 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1590955462092 .note-edge{stroke-dasharray:5}#mermaid-1590955462092 .statediagram-note rect{fill:#ffa;stroke:#770;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1590955462092 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M69.35804332386364,96L125.046875,27L150.484375,27\" marker-end=\"url(#arrowhead16)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead16\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M100.046875,115L125.046875,115L150.046875,115\" marker-end=\"url(#arrowhead17)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead17\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M69.35804332386364,134L125.046875,203L150.046875,203\" marker-end=\"url(#arrowhead18)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead18\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M242.53125,27L267.96875,27L323.6575816761364,96\" marker-end=\"url(#arrowhead19)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead19\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M242.96875,115L267.96875,115L292.96875,115\" marker-end=\"url(#arrowhead20)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead20\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M242.96875,203L267.96875,203L323.6575816761364,134\" marker-end=\"url(#arrowhead21)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead21\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"A\" transform=\"translate(54.0234375,115)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.0234375\" y=\"-19\" width=\"92.046875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.0234375,-9)\"><foreignObject width=\"72.046875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionA</div></foreignObject></g></g></g><g class=\"node default\" id=\"B\" transform=\"translate(196.5078125,27)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.0234375\" y=\"-19\" width=\"92.046875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.0234375,-9)\"><foreignObject width=\"72.046875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionB</div></foreignObject></g></g></g><g class=\"node default\" id=\"C\" transform=\"translate(196.5078125,115)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.4609375\" y=\"-19\" width=\"92.921875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.4609375,-9)\"><foreignObject width=\"72.921875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionC</div></foreignObject></g></g></g><g class=\"node default\" id=\"D\" transform=\"translate(196.5078125,203)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.4609375\" y=\"-19\" width=\"92.921875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.4609375,-9)\"><foreignObject width=\"72.921875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionD</div></foreignObject></g></g></g><g class=\"node default\" id=\"E\" transform=\"translate(338.9921875,115)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-46.0234375\" y=\"-19\" width=\"92.046875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-36.0234375,-9)\"><foreignObject width=\"72.046875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">FunctionE</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>Una primera Function recuperar el literal de la cadena de conexión que utilizarán las Functions B, C y D en paralelo para llamar a un repositorio de datos y hacer operaciones sobre filas de datos. Una vez terminen cada función reporta el número de filas que se han visto afectadas, y la FunctionE totaliza el número de filas.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"FanOutFanInPatternFunction\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">OrchestrationTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableOrchestrationContext</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> tasks <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">List<span class=\"token punctuation\">&lt;</span>Task<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> connectionString <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionA\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    tasks<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionB\"</span><span class=\"token punctuation\">,</span> connectionString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tasks<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionC\"</span><span class=\"token punctuation\">,</span> connectionString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tasks<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionD\"</span><span class=\"token punctuation\">,</span> connectionString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">await</span> Task<span class=\"token punctuation\">.</span><span class=\"token function\">WhenAll</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> totalRows <span class=\"token operator\">=</span> parallelTasks<span class=\"token punctuation\">.</span><span class=\"token function\">Sum</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>Result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CallActivityAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FunctionE\"</span><span class=\"token punctuation\">,</span> sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Async HTTP APIs</h3>\n<p>En este patrón resuelve posibles problemas de coordinación con el estado de las operaciones <em>long-running</em>, para ello, una forma es implementar una Function que desencadene la operativa, y a continuación el cliente se redirige a otra Function que le reporta el estado de las tareas, y así puede saber cómo se encuentra la ejecución.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1590955462299\" width=\"317.984375\" xmlns=\"http://www.w3.org/2000/svg\" height=\"230\" viewBox=\"-20.94921875 0 317.984375 230\"><style>#mermaid-1590955462299 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1590955462299 .label text{fill:#333}#mermaid-1590955462299 .node rect,#mermaid-1590955462299 .node circle,#mermaid-1590955462299 .node ellipse,#mermaid-1590955462299 .node polygon,#mermaid-1590955462299 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462299 .node .label{text-align:center}#mermaid-1590955462299 .node.clickable{cursor:pointer}#mermaid-1590955462299 .arrowheadPath{fill:#333}#mermaid-1590955462299 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1590955462299 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1590955462299 .edgeLabel rect{opacity:0.5}#mermaid-1590955462299 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1590955462299 .cluster text{fill:#333}#mermaid-1590955462299 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1590955462299 .actor{stroke:#999;fill:#eee}#mermaid-1590955462299 text.actor{fill:#333;stroke:none}#mermaid-1590955462299 .actor-line{stroke:#666}#mermaid-1590955462299 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462299 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462299 #arrowhead{fill:#333}#mermaid-1590955462299 .sequenceNumber{fill:#fff}#mermaid-1590955462299 #sequencenumber{fill:#333}#mermaid-1590955462299 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1590955462299 .messageText{fill:#333;stroke:none}#mermaid-1590955462299 .labelBox{stroke:#999;fill:#eee}#mermaid-1590955462299 .labelText{fill:#333;stroke:none}#mermaid-1590955462299 .loopText{fill:#333;stroke:none}#mermaid-1590955462299 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1590955462299 .note{stroke:#770;fill:#ffa}#mermaid-1590955462299 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1590955462299 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1590955462299 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1590955462299 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1590955462299 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .section{stroke:none;opacity:0.2}#mermaid-1590955462299 .section0{fill:#80b3e6}#mermaid-1590955462299 .section2{fill:#80b3e6}#mermaid-1590955462299 .section1,#mermaid-1590955462299 .section3{fill:#fff;opacity:0.2}#mermaid-1590955462299 .sectionTitle0{fill:#333}#mermaid-1590955462299 .sectionTitle1{fill:#333}#mermaid-1590955462299 .sectionTitle2{fill:#333}#mermaid-1590955462299 .sectionTitle3{fill:#333}#mermaid-1590955462299 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1590955462299 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .grid path{stroke-width:0}#mermaid-1590955462299 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1590955462299 .task{stroke-width:2}#mermaid-1590955462299 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .taskText:not([font-size]){font-size:11px}#mermaid-1590955462299 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1590955462299 .task.clickable{cursor:pointer}#mermaid-1590955462299 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462299 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462299 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462299 .taskText0,#mermaid-1590955462299 .taskText1,#mermaid-1590955462299 .taskText2,#mermaid-1590955462299 .taskText3{fill:#fff}#mermaid-1590955462299 .task0,#mermaid-1590955462299 .task1,#mermaid-1590955462299 .task2,#mermaid-1590955462299 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1590955462299 .taskTextOutside0,#mermaid-1590955462299 .taskTextOutside2{fill:#333}#mermaid-1590955462299 .taskTextOutside1,#mermaid-1590955462299 .taskTextOutside3{fill:#333}#mermaid-1590955462299 .active0,#mermaid-1590955462299 .active1,#mermaid-1590955462299 .active2,#mermaid-1590955462299 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1590955462299 .activeText0,#mermaid-1590955462299 .activeText1,#mermaid-1590955462299 .activeText2,#mermaid-1590955462299 .activeText3{fill:#333 !important}#mermaid-1590955462299 .done0,#mermaid-1590955462299 .done1,#mermaid-1590955462299 .done2,#mermaid-1590955462299 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1590955462299 .doneText0,#mermaid-1590955462299 .doneText1,#mermaid-1590955462299 .doneText2,#mermaid-1590955462299 .doneText3{fill:#333 !important}#mermaid-1590955462299 .crit0,#mermaid-1590955462299 .crit1,#mermaid-1590955462299 .crit2,#mermaid-1590955462299 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1590955462299 .activeCrit0,#mermaid-1590955462299 .activeCrit1,#mermaid-1590955462299 .activeCrit2,#mermaid-1590955462299 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1590955462299 .doneCrit0,#mermaid-1590955462299 .doneCrit1,#mermaid-1590955462299 .doneCrit2,#mermaid-1590955462299 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1590955462299 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1590955462299 .milestoneText{font-style:italic}#mermaid-1590955462299 .doneCritText0,#mermaid-1590955462299 .doneCritText1,#mermaid-1590955462299 .doneCritText2,#mermaid-1590955462299 .doneCritText3{fill:#333 !important}#mermaid-1590955462299 .activeCritText0,#mermaid-1590955462299 .activeCritText1,#mermaid-1590955462299 .activeCritText2,#mermaid-1590955462299 .activeCritText3{fill:#333 !important}#mermaid-1590955462299 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1590955462299 g.classGroup text .title{font-weight:bolder}#mermaid-1590955462299 g.clickable{cursor:pointer}#mermaid-1590955462299 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462299 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462299 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462299 .classLabel .label{fill:#999;font-size:10px}#mermaid-1590955462299 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462299 .dashed-line{stroke-dasharray:3}#mermaid-1590955462299 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462299 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462299 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462299 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462299 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462299 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462299 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462299 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462299 .commit-id,#mermaid-1590955462299 .commit-msg,#mermaid-1590955462299 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1590955462299 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1590955462299 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462299 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462299 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462299 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1590955462299 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1590955462299 .state-note{stroke:#770;fill:#ffa}#mermaid-1590955462299 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1590955462299 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462299 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462299 .node circle.state-start{fill:black;stroke:black}#mermaid-1590955462299 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1590955462299 #statediagram-barbEnd{fill:#999}#mermaid-1590955462299 .statediagram-cluster rect{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462299 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1590955462299 .statediagram-state .divider{stroke:#999}#mermaid-1590955462299 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1590955462299 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1590955462299 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1590955462299 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1590955462299 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1590955462299 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1590955462299 .note-edge{stroke-dasharray:5}#mermaid-1590955462299 .statediagram-note rect{fill:#ffa;stroke:#770;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1590955462299 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M55.55992542613636,46L82.74609375,71L82.74609375,96\" marker-end=\"url(#arrowhead16)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead16\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M14.236949573863637,46L-12.94921875,71L-12.94921875,115L-12.94921875,159L46.06640625,186.13494979181974\" marker-end=\"url(#arrowhead17)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead17\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M82.74609375,134L82.74609375,159L82.74609375,184\" marker-end=\"url(#arrowhead18)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead18\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M241.23828125,134L241.23828125,159L119.42578125,192.81712426677183\" marker-end=\"url(#arrowhead19)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead19\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"A\" transform=\"translate(34.8984375,27)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-26.8984375\" y=\"-19\" width=\"53.796875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-16.8984375,-9)\"><foreignObject width=\"33.796875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Start</div></foreignObject></g></g></g><g class=\"node default\" id=\"B\" transform=\"translate(82.74609375,115)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-60.6953125\" y=\"-19\" width=\"121.390625\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-50.6953125,-9)\"><foreignObject width=\"101.390625\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Do Something</div></foreignObject></g></g></g><g class=\"node default\" id=\"C\" transform=\"translate(82.74609375,203)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-36.6796875\" y=\"-19\" width=\"73.359375\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-26.6796875,-9)\"><foreignObject width=\"53.359375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Results</div></foreignObject></g></g></g><g class=\"node default\" id=\"D\" transform=\"translate(241.23828125,115)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-47.796875\" y=\"-19\" width=\"95.59375\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-37.796875,-9)\"><foreignObject width=\"75.59375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Get Status</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>El Framework de las Durable Function, tras iniciar una instancia, expone un webhook para que se pueda comprobar el estado de la ejecución sin necesidad de tener que realizar un desarrollo específico de comprobación de los estados.</p>\n<h3>Monitoring</h3>\n<p>Este patrón consistiría en una supervisión periódica y flexible de un workflow, por ejemplo, realizando comprobaciones hasta que se cumple una condición. En este patrón podríamos invertir el de la API asíncrona, y en lugar de exponer un punto para que un cliente externo supervise la operación, el propio monitor consume el punto de conexión y espera a que se produzca un cambio de estado o se cumpla la condición.</p>\n<p>En este ejemplo, la Function <code class=\"language-text\">Get Status</code> en lugar de exponer un API para consultar el estado de <code class=\"language-text\">Results</code>, está verificando de forma periódica el estado de los resultados y hasta que no se dan las condiciones de salida (en este caso que se complete la ejecución), no se finaliza el proceso.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1590955462040\" width=\"782.5703125\" xmlns=\"http://www.w3.org/2000/svg\" height=\"319.0546875\" viewBox=\"0 -35 782.5703125 319.0546875\"><style>#mermaid-1590955462040 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1590955462040 .label text{fill:#333}#mermaid-1590955462040 .node rect,#mermaid-1590955462040 .node circle,#mermaid-1590955462040 .node ellipse,#mermaid-1590955462040 .node polygon,#mermaid-1590955462040 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462040 .node .label{text-align:center}#mermaid-1590955462040 .node.clickable{cursor:pointer}#mermaid-1590955462040 .arrowheadPath{fill:#333}#mermaid-1590955462040 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1590955462040 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1590955462040 .edgeLabel rect{opacity:0.5}#mermaid-1590955462040 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1590955462040 .cluster text{fill:#333}#mermaid-1590955462040 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1590955462040 .actor{stroke:#999;fill:#eee}#mermaid-1590955462040 text.actor{fill:#333;stroke:none}#mermaid-1590955462040 .actor-line{stroke:#666}#mermaid-1590955462040 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462040 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462040 #arrowhead{fill:#333}#mermaid-1590955462040 .sequenceNumber{fill:#fff}#mermaid-1590955462040 #sequencenumber{fill:#333}#mermaid-1590955462040 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1590955462040 .messageText{fill:#333;stroke:none}#mermaid-1590955462040 .labelBox{stroke:#999;fill:#eee}#mermaid-1590955462040 .labelText{fill:#333;stroke:none}#mermaid-1590955462040 .loopText{fill:#333;stroke:none}#mermaid-1590955462040 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1590955462040 .note{stroke:#770;fill:#ffa}#mermaid-1590955462040 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1590955462040 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1590955462040 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1590955462040 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1590955462040 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .section{stroke:none;opacity:0.2}#mermaid-1590955462040 .section0{fill:#80b3e6}#mermaid-1590955462040 .section2{fill:#80b3e6}#mermaid-1590955462040 .section1,#mermaid-1590955462040 .section3{fill:#fff;opacity:0.2}#mermaid-1590955462040 .sectionTitle0{fill:#333}#mermaid-1590955462040 .sectionTitle1{fill:#333}#mermaid-1590955462040 .sectionTitle2{fill:#333}#mermaid-1590955462040 .sectionTitle3{fill:#333}#mermaid-1590955462040 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1590955462040 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .grid path{stroke-width:0}#mermaid-1590955462040 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1590955462040 .task{stroke-width:2}#mermaid-1590955462040 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .taskText:not([font-size]){font-size:11px}#mermaid-1590955462040 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1590955462040 .task.clickable{cursor:pointer}#mermaid-1590955462040 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462040 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462040 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462040 .taskText0,#mermaid-1590955462040 .taskText1,#mermaid-1590955462040 .taskText2,#mermaid-1590955462040 .taskText3{fill:#fff}#mermaid-1590955462040 .task0,#mermaid-1590955462040 .task1,#mermaid-1590955462040 .task2,#mermaid-1590955462040 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1590955462040 .taskTextOutside0,#mermaid-1590955462040 .taskTextOutside2{fill:#333}#mermaid-1590955462040 .taskTextOutside1,#mermaid-1590955462040 .taskTextOutside3{fill:#333}#mermaid-1590955462040 .active0,#mermaid-1590955462040 .active1,#mermaid-1590955462040 .active2,#mermaid-1590955462040 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1590955462040 .activeText0,#mermaid-1590955462040 .activeText1,#mermaid-1590955462040 .activeText2,#mermaid-1590955462040 .activeText3{fill:#333 !important}#mermaid-1590955462040 .done0,#mermaid-1590955462040 .done1,#mermaid-1590955462040 .done2,#mermaid-1590955462040 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1590955462040 .doneText0,#mermaid-1590955462040 .doneText1,#mermaid-1590955462040 .doneText2,#mermaid-1590955462040 .doneText3{fill:#333 !important}#mermaid-1590955462040 .crit0,#mermaid-1590955462040 .crit1,#mermaid-1590955462040 .crit2,#mermaid-1590955462040 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1590955462040 .activeCrit0,#mermaid-1590955462040 .activeCrit1,#mermaid-1590955462040 .activeCrit2,#mermaid-1590955462040 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1590955462040 .doneCrit0,#mermaid-1590955462040 .doneCrit1,#mermaid-1590955462040 .doneCrit2,#mermaid-1590955462040 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1590955462040 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1590955462040 .milestoneText{font-style:italic}#mermaid-1590955462040 .doneCritText0,#mermaid-1590955462040 .doneCritText1,#mermaid-1590955462040 .doneCritText2,#mermaid-1590955462040 .doneCritText3{fill:#333 !important}#mermaid-1590955462040 .activeCritText0,#mermaid-1590955462040 .activeCritText1,#mermaid-1590955462040 .activeCritText2,#mermaid-1590955462040 .activeCritText3{fill:#333 !important}#mermaid-1590955462040 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1590955462040 g.classGroup text .title{font-weight:bolder}#mermaid-1590955462040 g.clickable{cursor:pointer}#mermaid-1590955462040 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462040 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462040 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462040 .classLabel .label{fill:#999;font-size:10px}#mermaid-1590955462040 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462040 .dashed-line{stroke-dasharray:3}#mermaid-1590955462040 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462040 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462040 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462040 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462040 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462040 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462040 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462040 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462040 .commit-id,#mermaid-1590955462040 .commit-msg,#mermaid-1590955462040 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1590955462040 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1590955462040 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462040 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462040 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462040 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1590955462040 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1590955462040 .state-note{stroke:#770;fill:#ffa}#mermaid-1590955462040 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1590955462040 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462040 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462040 .node circle.state-start{fill:black;stroke:black}#mermaid-1590955462040 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1590955462040 #statediagram-barbEnd{fill:#999}#mermaid-1590955462040 .statediagram-cluster rect{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462040 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1590955462040 .statediagram-state .divider{stroke:#999}#mermaid-1590955462040 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1590955462040 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1590955462040 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1590955462040 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1590955462040 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1590955462040 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1590955462040 .note-edge{stroke-dasharray:5}#mermaid-1590955462040 .statediagram-note rect{fill:#ffa;stroke:#770;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1590955462040 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M43.49061912324069,99.763671875L86.796875,195.52734375L111.796875,195.52734375\" marker-end=\"url(#arrowhead41)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead41\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M48.83313430660208,61.763671875L86.796875,10L172.4921875,10L258.1875,10L312.47468324945174,149.52734375\" marker-end=\"url(#arrowhead42)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead42\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M233.1875,195.52734375L258.1875,195.52734375L283.1875,184.5837085378404\" marker-end=\"url(#arrowhead43)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead43\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M44.04874107951971,61.763671875L86.796875,-27L172.4921875,-27L258.1875,-27L319.8671875,-27L420.234375,-27L556.44921875,-27L653.9765625,-27L719.6995387885826,149.52734375\" marker-end=\"url(#arrowhead44)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead44\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M713.9102849588586,187.52734375L653.9765625,276.0546875L556.44921875,276.0546875L420.234375,276.0546875L337.6019933270062,187.52734375\" marker-end=\"url(#arrowhead45)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead45\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M353.7607550356684,149.52734375L420.234375,112.263671875L505.62244721693014,147.82677153306983\" marker-end=\"url(#arrowhead46)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead46\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M629.4765625,169.02734375L653.9765625,168.52734375L678.9765625,168.52734375\" marker-end=\"url(#arrowhead47)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead47\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M500.65001447805946,185.25548322805943L420.234375,207.791015625L356.546875,182.87644777842104\" marker-end=\"url(#arrowhead48)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead48\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M333.3414498720019,149.52734375L420.234375,27L532.21484375,27\" marker-end=\"url(#arrowhead49)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead49\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(420.234375,207.791015625)\" style=\"opacity: 1;\"><g transform=\"translate(-38.6875,-9)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"77.375\" height=\"18\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"77.375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\">Completed</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(420.234375,27)\" style=\"opacity: 1;\"><g transform=\"translate(-38.6875,-9)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"77.375\" height=\"18\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"77.375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\">Completed</span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"A\" transform=\"translate(34.8984375,80.763671875)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-26.8984375\" y=\"-19\" width=\"53.796875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-16.8984375,-9)\"><foreignObject width=\"33.796875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Start</div></foreignObject></g></g></g><g class=\"node default\" id=\"B\" transform=\"translate(172.4921875,195.52734375)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-60.6953125\" y=\"-19\" width=\"121.390625\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-50.6953125,-9)\"><foreignObject width=\"101.390625\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Do Something</div></foreignObject></g></g></g><g class=\"node default\" id=\"C\" transform=\"translate(319.8671875,168.52734375)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-36.6796875\" y=\"-19\" width=\"73.359375\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-26.6796875,-9)\"><foreignObject width=\"53.359375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Results</div></foreignObject></g></g></g><g class=\"node default\" id=\"D\" transform=\"translate(726.7734375,168.52734375)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-47.796875\" y=\"-19\" width=\"95.59375\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-37.796875,-9)\"><foreignObject width=\"75.59375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Get Status</div></foreignObject></g></g></g><g class=\"node default\" id=\"F\" transform=\"translate(556.44921875,168.52734375)\" style=\"opacity: 1;\"><polygon points=\"72.52734375,0 145.0546875,-72.52734375 72.52734375,-145.0546875 0,-72.52734375\" transform=\"translate(-72.52734375,72.52734375)\" class=\"label-container\"></polygon><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-51.5859375,-9)\"><foreignObject width=\"103.171875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Is Completed?</div></foreignObject></g></g></g><g class=\"node default\" id=\"G\" transform=\"translate(556.44921875,27)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-24.234375\" y=\"-19\" width=\"48.46875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-14.234375,-9)\"><foreignObject width=\"28.46875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">End</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>En este ejemplo, el <code class=\"language-text\">while</code> está ejecutándose mientras no se complete el trabajo de otra Function o la fecha y hora actual sea mayor que la fecha de expiración. Cada 5 segundos hará una nueva iteración para comprobar el estado.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"MonitorJobStatus\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">OrchestrationTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableOrchestrationContext</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> id <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetInput</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> intervalSeconds <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> maxDateTime <span class=\"token operator\">=</span> DateTime<span class=\"token punctuation\">.</span>UtcNow<span class=\"token punctuation\">.</span><span class=\"token function\">AddHours</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>CurrentUtcDateTime <span class=\"token operator\">&lt;</span> maxDateTime<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> status <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">CallActivityAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GetStatus\"</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">==</span> <span class=\"token string\">\"Completed\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CallActivityAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"End\"</span><span class=\"token punctuation\">,</span> machineId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> nextCheck <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>CurrentUtcDateTime<span class=\"token punctuation\">.</span><span class=\"token function\">AddSeconds</span><span class=\"token punctuation\">(</span>intervalSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CreateTimer</span><span class=\"token punctuation\">(</span>nextCheck<span class=\"token punctuation\">,</span> CancellationToken<span class=\"token punctuation\">.</span>None<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Human interaction</h3>\n<p>En determinados casos, un workflow requiere de la intervención humana para proseguir con su ejecución. Esta acción manual, en un proceso automatizado ralentiza significativamente la ejecución, pues las personas no tienen la disponibilidad que tienen las máquinas. Para poder realizar escenarios de este tipo se deben implementar tiempos de expiración y lógicas de compensación.</p>\n<p>En este ejemplo se inicia la ejecución y se solicita a un humano la aprobación, si el usuario no responde a tiempo se escala, pero si contesta se continúa con el proceso gestionando la respuesta que haya facilitado para la Aprobación o Rechazo.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1590955462123\" width=\"879.2239990234375\" xmlns=\"http://www.w3.org/2000/svg\" height=\"185.875\" viewBox=\"0 0 879.2239990234375 185.875\"><style>#mermaid-1590955462123 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1590955462123 .label text{fill:#333}#mermaid-1590955462123 .node rect,#mermaid-1590955462123 .node circle,#mermaid-1590955462123 .node ellipse,#mermaid-1590955462123 .node polygon,#mermaid-1590955462123 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462123 .node .label{text-align:center}#mermaid-1590955462123 .node.clickable{cursor:pointer}#mermaid-1590955462123 .arrowheadPath{fill:#333}#mermaid-1590955462123 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1590955462123 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1590955462123 .edgeLabel rect{opacity:0.5}#mermaid-1590955462123 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1590955462123 .cluster text{fill:#333}#mermaid-1590955462123 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1590955462123 .actor{stroke:#999;fill:#eee}#mermaid-1590955462123 text.actor{fill:#333;stroke:none}#mermaid-1590955462123 .actor-line{stroke:#666}#mermaid-1590955462123 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462123 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462123 #arrowhead{fill:#333}#mermaid-1590955462123 .sequenceNumber{fill:#fff}#mermaid-1590955462123 #sequencenumber{fill:#333}#mermaid-1590955462123 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1590955462123 .messageText{fill:#333;stroke:none}#mermaid-1590955462123 .labelBox{stroke:#999;fill:#eee}#mermaid-1590955462123 .labelText{fill:#333;stroke:none}#mermaid-1590955462123 .loopText{fill:#333;stroke:none}#mermaid-1590955462123 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1590955462123 .note{stroke:#770;fill:#ffa}#mermaid-1590955462123 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1590955462123 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1590955462123 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1590955462123 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1590955462123 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .section{stroke:none;opacity:0.2}#mermaid-1590955462123 .section0{fill:#80b3e6}#mermaid-1590955462123 .section2{fill:#80b3e6}#mermaid-1590955462123 .section1,#mermaid-1590955462123 .section3{fill:#fff;opacity:0.2}#mermaid-1590955462123 .sectionTitle0{fill:#333}#mermaid-1590955462123 .sectionTitle1{fill:#333}#mermaid-1590955462123 .sectionTitle2{fill:#333}#mermaid-1590955462123 .sectionTitle3{fill:#333}#mermaid-1590955462123 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1590955462123 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .grid path{stroke-width:0}#mermaid-1590955462123 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1590955462123 .task{stroke-width:2}#mermaid-1590955462123 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .taskText:not([font-size]){font-size:11px}#mermaid-1590955462123 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1590955462123 .task.clickable{cursor:pointer}#mermaid-1590955462123 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462123 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462123 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462123 .taskText0,#mermaid-1590955462123 .taskText1,#mermaid-1590955462123 .taskText2,#mermaid-1590955462123 .taskText3{fill:#fff}#mermaid-1590955462123 .task0,#mermaid-1590955462123 .task1,#mermaid-1590955462123 .task2,#mermaid-1590955462123 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1590955462123 .taskTextOutside0,#mermaid-1590955462123 .taskTextOutside2{fill:#333}#mermaid-1590955462123 .taskTextOutside1,#mermaid-1590955462123 .taskTextOutside3{fill:#333}#mermaid-1590955462123 .active0,#mermaid-1590955462123 .active1,#mermaid-1590955462123 .active2,#mermaid-1590955462123 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1590955462123 .activeText0,#mermaid-1590955462123 .activeText1,#mermaid-1590955462123 .activeText2,#mermaid-1590955462123 .activeText3{fill:#333 !important}#mermaid-1590955462123 .done0,#mermaid-1590955462123 .done1,#mermaid-1590955462123 .done2,#mermaid-1590955462123 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1590955462123 .doneText0,#mermaid-1590955462123 .doneText1,#mermaid-1590955462123 .doneText2,#mermaid-1590955462123 .doneText3{fill:#333 !important}#mermaid-1590955462123 .crit0,#mermaid-1590955462123 .crit1,#mermaid-1590955462123 .crit2,#mermaid-1590955462123 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1590955462123 .activeCrit0,#mermaid-1590955462123 .activeCrit1,#mermaid-1590955462123 .activeCrit2,#mermaid-1590955462123 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1590955462123 .doneCrit0,#mermaid-1590955462123 .doneCrit1,#mermaid-1590955462123 .doneCrit2,#mermaid-1590955462123 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1590955462123 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1590955462123 .milestoneText{font-style:italic}#mermaid-1590955462123 .doneCritText0,#mermaid-1590955462123 .doneCritText1,#mermaid-1590955462123 .doneCritText2,#mermaid-1590955462123 .doneCritText3{fill:#333 !important}#mermaid-1590955462123 .activeCritText0,#mermaid-1590955462123 .activeCritText1,#mermaid-1590955462123 .activeCritText2,#mermaid-1590955462123 .activeCritText3{fill:#333 !important}#mermaid-1590955462123 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1590955462123 g.classGroup text .title{font-weight:bolder}#mermaid-1590955462123 g.clickable{cursor:pointer}#mermaid-1590955462123 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462123 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462123 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462123 .classLabel .label{fill:#999;font-size:10px}#mermaid-1590955462123 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462123 .dashed-line{stroke-dasharray:3}#mermaid-1590955462123 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462123 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462123 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462123 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462123 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462123 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462123 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462123 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462123 .commit-id,#mermaid-1590955462123 .commit-msg,#mermaid-1590955462123 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1590955462123 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1590955462123 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462123 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462123 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462123 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1590955462123 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1590955462123 .state-note{stroke:#770;fill:#ffa}#mermaid-1590955462123 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1590955462123 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462123 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462123 .node circle.state-start{fill:black;stroke:black}#mermaid-1590955462123 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1590955462123 #statediagram-barbEnd{fill:#999}#mermaid-1590955462123 .statediagram-cluster rect{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462123 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1590955462123 .statediagram-state .divider{stroke:#999}#mermaid-1590955462123 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1590955462123 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1590955462123 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1590955462123 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1590955462123 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1590955462123 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1590955462123 .note-edge{stroke-dasharray:5}#mermaid-1590955462123 .statediagram-note rect{fill:#ffa;stroke:#770;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1590955462123 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M152.515625,92.9375L177.515625,92.9375L212.515625,93.4375\" marker-end=\"url(#arrowhead19)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead19\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M389.14583333333337,93.4375L423.1458435058594,92.9375L448.6458435058594,93.4375\" marker-end=\"url(#arrowhead20)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead20\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M597.8801807512857,72.7968372454263L670.1458435058594,48.9375L722.2708435058594,48.9375\" marker-end=\"url(#arrowhead21)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead21\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M597.8801807512857,114.0781627545737L670.1458435058594,136.9375L756.0599060058594,136.9375\" marker-end=\"url(#arrowhead22)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead22\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(670.1458435058594,136.9375)\" style=\"opacity: 1;\"><g transform=\"translate(-27.125,-9)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"54.25\" height=\"18\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"54.25\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\">Expired</span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"A\" transform=\"translate(80.2578125,92.9375)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-72.2578125\" y=\"-19\" width=\"144.515625\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-62.2578125,-9)\"><foreignObject width=\"124.515625\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">ApprovalFunction</div></foreignObject></g></g></g><g class=\"node default\" id=\"B\" transform=\"translate(300.3307342529297,92.9375)\" style=\"opacity: 1;\"><polygon points=\"6.333333333333333,0 163.96354166666666,0 182.96354166666666,-38 -12.666666666666666,-38\" transform=\"translate(-85.1484375,19)\" class=\"label-container\"></polygon><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-75.1484375,-9)\"><foreignObject width=\"150.296875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Ask Human Approval</div></foreignObject></g></g></g><g class=\"node default\" id=\"C\" transform=\"translate(533.0833435058594,92.9375)\" style=\"opacity: 1;\"><polygon points=\"84.9375,0 169.875,-84.9375 84.9375,-169.875 0,-84.9375\" transform=\"translate(-84.9375,84.9375)\" class=\"label-container\"></polygon><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-65.375,-9)\"><foreignObject width=\"130.75\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Expired Approval?</div></foreignObject></g></g></g><g class=\"node default\" id=\"D\" transform=\"translate(796.7474060058594,48.9375)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-74.4765625\" y=\"-19\" width=\"148.953125\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-64.4765625,-9)\"><foreignObject width=\"128.953125\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">ProccessApproval</div></foreignObject></g></g></g><g class=\"node default\" id=\"E\" transform=\"translate(796.7474060058594,136.9375)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-40.6875\" y=\"-19\" width=\"81.375\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-30.6875,-9)\"><foreignObject width=\"61.375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Escalate</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>En este <em>snippet</em> si la Function no recibe el resultado de la aprobación o rechazo del usuario en 72 horas, se continúa la ejecución llamando a otra Function para que gestione la falta de respuesta. Por otro lado, <code class=\"language-text\">RaiseEventToOrchestration</code> envía un aprobado a la orquestación para responder a la solicitud de aprobación.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"ApprovalFunction\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">OrchestrationTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableOrchestrationContext</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CallActivityAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RequestApproval\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">using</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> timeoutCts <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">CancellationTokenSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> dueTime <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>CurrentUtcDateTime<span class=\"token punctuation\">.</span><span class=\"token function\">AddHours</span><span class=\"token punctuation\">(</span><span class=\"token number\">72</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> durableTimeout <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CreateTimer</span><span class=\"token punctuation\">(</span>dueTime<span class=\"token punctuation\">,</span> timeoutCts<span class=\"token punctuation\">.</span>Token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> approvalEvent <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">WaitForExternalEvent</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">bool</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ApprovalEvent\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>approvalEvent <span class=\"token operator\">==</span> <span class=\"token keyword\">await</span> Task<span class=\"token punctuation\">.</span><span class=\"token function\">WhenAny</span><span class=\"token punctuation\">(</span>approvalEvent<span class=\"token punctuation\">,</span> durableTimeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            timeoutCts<span class=\"token punctuation\">.</span><span class=\"token function\">Cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CallActivityAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ProcessApproval\"</span><span class=\"token punctuation\">,</span> approvalEvent<span class=\"token punctuation\">.</span>Result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">await</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">CallActivityAsync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Escalate\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"RaiseEventToOrchestration\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">HttpTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> instanceId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">DurableClient</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableOrchestrationClient</span> client<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">bool</span></span> isApproved <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">RaiseEventAsync</span><span class=\"token punctuation\">(</span>instanceId<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ApprovalEvent\"</span><span class=\"token punctuation\">,</span> isApproved<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Aggregator (stateful entities)</h3>\n<p>Este patrón trata de agregar datos o lotes de datos de distintos eventos e incluso orígenes, durante un período determinado de tiempo en una Entidad expuesta por una <strong>Durable Entity</strong>. El proceso podría ir realizando operaciones sobre los datos que recibe durante la ejecución del proceso y también es posible que durante la ejecución, clientes externos puedan consultar los datos agregados.</p>\n<p>Implementar este patrón con funciones normales es casi imposible, ya que es necesiario gestionar el estado o la simultaneidad. Para simplificar y poder llevar a cabo este patrón de una forma sencilla en una única Function se utilizan las <strong>Durable Entities</strong>.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1590955462045\" width=\"307.375\" xmlns=\"http://www.w3.org/2000/svg\" height=\"176\" viewBox=\"0 0 307.375 176\"><style>#mermaid-1590955462045 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1590955462045 .label text{fill:#333}#mermaid-1590955462045 .node rect,#mermaid-1590955462045 .node circle,#mermaid-1590955462045 .node ellipse,#mermaid-1590955462045 .node polygon,#mermaid-1590955462045 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462045 .node .label{text-align:center}#mermaid-1590955462045 .node.clickable{cursor:pointer}#mermaid-1590955462045 .arrowheadPath{fill:#333}#mermaid-1590955462045 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1590955462045 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1590955462045 .edgeLabel rect{opacity:0.5}#mermaid-1590955462045 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1590955462045 .cluster text{fill:#333}#mermaid-1590955462045 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1590955462045 .actor{stroke:#999;fill:#eee}#mermaid-1590955462045 text.actor{fill:#333;stroke:none}#mermaid-1590955462045 .actor-line{stroke:#666}#mermaid-1590955462045 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462045 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1590955462045 #arrowhead{fill:#333}#mermaid-1590955462045 .sequenceNumber{fill:#fff}#mermaid-1590955462045 #sequencenumber{fill:#333}#mermaid-1590955462045 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1590955462045 .messageText{fill:#333;stroke:none}#mermaid-1590955462045 .labelBox{stroke:#999;fill:#eee}#mermaid-1590955462045 .labelText{fill:#333;stroke:none}#mermaid-1590955462045 .loopText{fill:#333;stroke:none}#mermaid-1590955462045 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1590955462045 .note{stroke:#770;fill:#ffa}#mermaid-1590955462045 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1590955462045 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1590955462045 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1590955462045 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1590955462045 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .section{stroke:none;opacity:0.2}#mermaid-1590955462045 .section0{fill:#80b3e6}#mermaid-1590955462045 .section2{fill:#80b3e6}#mermaid-1590955462045 .section1,#mermaid-1590955462045 .section3{fill:#fff;opacity:0.2}#mermaid-1590955462045 .sectionTitle0{fill:#333}#mermaid-1590955462045 .sectionTitle1{fill:#333}#mermaid-1590955462045 .sectionTitle2{fill:#333}#mermaid-1590955462045 .sectionTitle3{fill:#333}#mermaid-1590955462045 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1590955462045 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .grid path{stroke-width:0}#mermaid-1590955462045 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1590955462045 .task{stroke-width:2}#mermaid-1590955462045 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .taskText:not([font-size]){font-size:11px}#mermaid-1590955462045 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1590955462045 .task.clickable{cursor:pointer}#mermaid-1590955462045 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462045 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462045 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1590955462045 .taskText0,#mermaid-1590955462045 .taskText1,#mermaid-1590955462045 .taskText2,#mermaid-1590955462045 .taskText3{fill:#fff}#mermaid-1590955462045 .task0,#mermaid-1590955462045 .task1,#mermaid-1590955462045 .task2,#mermaid-1590955462045 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1590955462045 .taskTextOutside0,#mermaid-1590955462045 .taskTextOutside2{fill:#333}#mermaid-1590955462045 .taskTextOutside1,#mermaid-1590955462045 .taskTextOutside3{fill:#333}#mermaid-1590955462045 .active0,#mermaid-1590955462045 .active1,#mermaid-1590955462045 .active2,#mermaid-1590955462045 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1590955462045 .activeText0,#mermaid-1590955462045 .activeText1,#mermaid-1590955462045 .activeText2,#mermaid-1590955462045 .activeText3{fill:#333 !important}#mermaid-1590955462045 .done0,#mermaid-1590955462045 .done1,#mermaid-1590955462045 .done2,#mermaid-1590955462045 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1590955462045 .doneText0,#mermaid-1590955462045 .doneText1,#mermaid-1590955462045 .doneText2,#mermaid-1590955462045 .doneText3{fill:#333 !important}#mermaid-1590955462045 .crit0,#mermaid-1590955462045 .crit1,#mermaid-1590955462045 .crit2,#mermaid-1590955462045 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1590955462045 .activeCrit0,#mermaid-1590955462045 .activeCrit1,#mermaid-1590955462045 .activeCrit2,#mermaid-1590955462045 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1590955462045 .doneCrit0,#mermaid-1590955462045 .doneCrit1,#mermaid-1590955462045 .doneCrit2,#mermaid-1590955462045 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1590955462045 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1590955462045 .milestoneText{font-style:italic}#mermaid-1590955462045 .doneCritText0,#mermaid-1590955462045 .doneCritText1,#mermaid-1590955462045 .doneCritText2,#mermaid-1590955462045 .doneCritText3{fill:#333 !important}#mermaid-1590955462045 .activeCritText0,#mermaid-1590955462045 .activeCritText1,#mermaid-1590955462045 .activeCritText2,#mermaid-1590955462045 .activeCritText3{fill:#333 !important}#mermaid-1590955462045 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1590955462045 g.classGroup text .title{font-weight:bolder}#mermaid-1590955462045 g.clickable{cursor:pointer}#mermaid-1590955462045 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462045 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462045 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462045 .classLabel .label{fill:#999;font-size:10px}#mermaid-1590955462045 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462045 .dashed-line{stroke-dasharray:3}#mermaid-1590955462045 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462045 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462045 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462045 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1590955462045 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462045 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462045 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462045 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1590955462045 .commit-id,#mermaid-1590955462045 .commit-msg,#mermaid-1590955462045 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1590955462045 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1590955462045 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1590955462045 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1590955462045 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1590955462045 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1590955462045 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1590955462045 .state-note{stroke:#770;fill:#ffa}#mermaid-1590955462045 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1590955462045 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1590955462045 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1590955462045 .node circle.state-start{fill:black;stroke:black}#mermaid-1590955462045 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1590955462045 #statediagram-barbEnd{fill:#999}#mermaid-1590955462045 .statediagram-cluster rect{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1590955462045 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1590955462045 .statediagram-state .divider{stroke:#999}#mermaid-1590955462045 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1590955462045 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1590955462045 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1590955462045 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1590955462045 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1590955462045 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1590955462045 .note-edge{stroke-dasharray:5}#mermaid-1590955462045 .statediagram-note rect{fill:#ffa;stroke:#770;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1590955462045 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M28,18L53,18L78,18\" marker-end=\"url(#arrowhead23)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead23\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M98,18L123,18L148,18\" marker-end=\"url(#arrowhead24)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead24\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M168,18L193,18L240.8580357142857,69\" marker-end=\"url(#arrowhead25)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead25\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M28,88L53,88L78,88\" marker-end=\"url(#arrowhead26)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead26\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M98,88L123,88L148,88\" marker-end=\"url(#arrowhead27)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead27\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M168,88L193,88L218,88\" marker-end=\"url(#arrowhead28)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead28\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M28,158L53,158L78,158\" marker-end=\"url(#arrowhead29)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead29\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M98,158L123,158L148,158\" marker-end=\"url(#arrowhead30)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead30\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M168,158L193,158L240.8580357142857,107\" marker-end=\"url(#arrowhead31)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead31\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\" style=\"fill:#e8e8e8;\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"A1\" transform=\"translate(18,18)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"B1\" transform=\"translate(88,18)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"C1\" transform=\"translate(158,18)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"D\" transform=\"translate(258.6875,88)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-40.6875\" y=\"-19\" width=\"81.375\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-30.6875,-9)\"><foreignObject width=\"61.375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Function</div></foreignObject></g></g></g><g class=\"node default\" id=\"A2\" transform=\"translate(18,88)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"B2\" transform=\"translate(88,88)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"C2\" transform=\"translate(158,88)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"A3\" transform=\"translate(18,158)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"B3\" transform=\"translate(88,158)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g><g class=\"node default\" id=\"C3\" transform=\"translate(158,158)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(0,0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"></div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>Cada vez que un <code class=\"language-text\">EventHub</code> desencadene el trigger se creará una entidad y se agregará un delta con los datos recibidos.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"EventHubTriggerFunction\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">EventHubTrigger</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"device-sensor-events\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">EventData</span> eventData<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">DurableClient</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableOrchestrationClient</span> entityClient<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> metricType <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">)</span>eventData<span class=\"token punctuation\">.</span>Properties<span class=\"token punctuation\">[</span><span class=\"token string\">\"metric\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> delta <span class=\"token operator\">=</span> BitConverter<span class=\"token punctuation\">.</span><span class=\"token function\">ToInt32</span><span class=\"token punctuation\">(</span>eventData<span class=\"token punctuation\">.</span>Body<span class=\"token punctuation\">,</span> eventData<span class=\"token punctuation\">.</span>Body<span class=\"token punctuation\">.</span>Offset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> entityId <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">EntityId</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Counter\"</span><span class=\"token punctuation\">,</span> metricType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> entityClient<span class=\"token punctuation\">.</span><span class=\"token function\">SignalEntityAsync</span><span class=\"token punctuation\">(</span>entityId<span class=\"token punctuation\">,</span> <span class=\"token string\">\"add\"</span><span class=\"token punctuation\">,</span> delta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CounterFunction</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"Counter\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">EntityTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableEntityContext</span> ctx<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">.</span>OperationName<span class=\"token punctuation\">.</span><span class=\"token function\">ToLowerInvariant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"add\"</span><span class=\"token punctuation\">:</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">SetState</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetState</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ctx<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetInput</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"reset\"</span><span class=\"token punctuation\">:</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">SetState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">:</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">Return</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetState</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">JsonObject</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span>MemberSerialization<span class=\"token punctuation\">.</span>OptIn<span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">JsonProperty</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">int</span></span> CurrentValue <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> amount<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>CurrentValue <span class=\"token operator\">+=</span> amount<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>CurrentValue <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">int</span></span> <span class=\"token function\">Get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>CurrentValue<span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">nameof</span><span class=\"token punctuation\">(</span>Counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">EntityTrigger</span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">IDurableEntityContext</span> ctx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ctx<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">DispatchAsync</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>Counter<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Durable Functions Patterns","date":"2020, May 31","description":"Patrones de Durable Functions.","tags":["Azure","Functions","Patterns","Serverless"],"img":{"childImageSharp":{"fluid":{"aspectRatio":1.941544885177453,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd6bQwD/xAAXEAEAAwAAAAAAAAAAAAAAAAABABEg/9oACAEBAAEFAmF5/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABkQAAMAAwAAAAAAAAAAAAAAAAEQMQARgf/aAAgBAQABPyGMIrp1iL//2gAMAwEAAgADAAAAEFPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQETFBUf/aAAgBAQABPxAiCi8HVUw5EmKqb//Z","sizes":"(max-width: 1940px) 100vw, 1940px","src":"/static/27ed97e1c169ceb10426eb50dbf6bc6b/6b48d/Patterns.jpg","srcSet":"/static/27ed97e1c169ceb10426eb50dbf6bc6b/2f037/Patterns.jpg 930w,\n/static/27ed97e1c169ceb10426eb50dbf6bc6b/23f4e/Patterns.jpg 1860w,\n/static/27ed97e1c169ceb10426eb50dbf6bc6b/6b48d/Patterns.jpg 1940w"}}}}}},"pageContext":{"slug":"/2020/05/31/","previous":{"fields":{"slug":"/2020/05/30/"},"frontmatter":{"title":"Durable Functions","tags":["Azure","Functions","Serverless"],"img":{"childImageSharp":{"fluid":{"aspectRatio":1.941544885177453,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdxSAr//xAAWEAEBAQAAAAAAAAAAAAAAAAAhESD/2gAIAQEAAQUCa5//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQARICEx8f/aAAgBAQABPyEnAUn7oZYaH//aAAwDAQACAAMAAAAQOM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QDJ//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAxICFRcaH/2gAIAQEAAT8Qqgh7NVH1hEsxw3h//9k=","sizes":"(max-width: 1940px) 100vw, 1940px","src":"/static/f8e5e063265e9bce9de8ad1b54603359/6b48d/Functions.jpg","srcSet":"/static/f8e5e063265e9bce9de8ad1b54603359/2f037/Functions.jpg 930w,\n/static/f8e5e063265e9bce9de8ad1b54603359/23f4e/Functions.jpg 1860w,\n/static/f8e5e063265e9bce9de8ad1b54603359/6b48d/Functions.jpg 1940w"}}}}},"next":null}}}